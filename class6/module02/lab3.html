<!DOCTYPE html>
<head>
  
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-PPZPQ6');</script>
  <!-- End Google Tag Manager -->
    <title>Securing Web Applications</title>
  

  <meta charset="utf-8">
  <!-- Twitter Bootstrap viewport setting -->
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <!-- F5 metadata -->
  <meta name="title" content="Securing Web Applications"/>
  <meta name="product" content="Unofficial - F5 Certification Exam Prep Material"/>
  <meta name="version" content=""/>
  <meta name="updated_date"  content="2020-08-13 09:31:44"/>
  <meta name="archived" content="Archived documents excluded"/>
  <meta name="doc_type" content="Manual"/>
  <meta name="lifecycle" content="release"/>
  <meta name="Unofficial - F5 Certification Exam Prep Material" content=""/>


  

  
  <link href="https://cdn.f5.com/favicon.ico" rel="icon">

</head>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Securing Web Applications &#8212; Unofficial - F5 Certification Exam Prep Material  documentation</title>
    <link rel="stylesheet" href="../../_static/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/f5_agility_theme.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/f5.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/f5-theme.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/CoveoFullSearch.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css" />
    <link rel="stylesheet" type="text/css" href="https://use.fontawesome.com/21fb8a09c3.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Lab 3 - Application Visibilty and Reporting (AVR)" href="../module03/module03.html" />
    <link rel="prev" title="Application Acceleration" href="lab2.html" /> 
  </head><body>
  <div id="clouddocs-header"></div>

    <div id="sidebar" class="section-nav">
      
      <!--  version selector ------------------>
      <div id="version_selector_wrapper">
      </div>
      <nav class="nav-sidebartoc">

        
         <h5>Unofficial - F5 Certification Exam Prep Material  </h5>
        

        <hr>
        <span class="nav-sidebartoc">
            <p class="caption"><span class="caption-text">Intro:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../intro.html">Getting Started with the F5 Certification Program 03/29/19</a></li>
</ul>
<p class="caption"><span class="caption-text">Unofficial - 101 Certification Exam Resources:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../class1/class1.html">F5 101 - App Delivery Fundamentals Study Guide 11/01/19</a></li>
</ul>
<p class="caption"><span class="caption-text">Unofficial - 201 Certification Exam Resources:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../class2/class2.html">F5 201 - TMOS Administration Study Guide 11/01/19</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../class3/class3.html">F5 201 - TMOS Administration Labs 08/11/2020</a></li>
</ul>
<p class="caption"><span class="caption-text">Unofficial - 202 Certification Exam Resources:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../class4/class4.html">F5 202 - Pre-Sales Fundamentals Study Guide 11/01/19</a></li>
</ul>
<p class="caption"><span class="caption-text">Unofficial - 301A Certification Exam Resources:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../class5/class5.html">F5 301A - BIG-IP LTM Specialist: Architect, Set-Up &amp; Deploy Study Guide 11/01/19</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../class6.html">F5 301A - BIG-IP LTM Specialist Labs 11/01/19</a></li>
</ul>
<p class="caption"><span class="caption-text">Unofficial - 301B Certification Exam Resources:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../class7/class7.html">F5 301B - BIG-IP LTM Specialist: Maintain and Troubleshoot Study Guide 11/01/19</a></li>
</ul>
<p class="caption"><span class="caption-text">Unofficial - 302 Certification Exam Resources:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../class9/class9.html">F5 302 - BIG-IP DNS Specialist Study Guide 11/01/19</a></li>
</ul>
<p class="caption"><span class="caption-text">Unofficial - 303 Certification Exam Resources:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../class11/class11.html">F5 303 - BIG-IP ASM Specialist Study Guide 11/01/19</a></li>
</ul>
<p class="caption"><span class="caption-text">Unofficial - 304 Certification Exam Resources:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../class13/class13.html">F5 304 - BIG-IP APM Specialist Study Guide 11/01/19</a></li>
</ul>
<p class="caption"><span class="caption-text">Unofficial - 401 Certification Exam Resources:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../class15/class15.html">F5 401 - Security Solution Expert Study Guide 11/01/19</a></li>
</ul>
<p class="caption"><span class="caption-text">Unofficial - 402 Certification Exam Resources:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../class17/class17.html">F5 402 - Cloud Solutions Study Guide 11/01/19</a></li>
</ul>

        </span><!-- Use this file to add extra links to the bottom of the ToC sidebar -->
<hr>
  <span class="nav-sidebartoc">
 <!-- insert content here -->
  </span>
      </nav>
    </div>


    <div id="right-sidebar">
      <h7 style="font-weight:normal">On this page:</h7>
      <nav class="nav-sidebartoc">
        <span class="nav-sidebartoc">
            <ul>
<li><a class="reference internal" href="#">Securing Web Applications</a><ul>
<li><a class="reference internal" href="#securing-web-applications-with-the-http-profile">Securing web applications with the HTTP profile</a></li>
<li><a class="reference internal" href="#using-irules">Using iRules</a></li>
</ul>
</li>
</ul>

         </span>
      </nav>
    </div>





  
  <div class="main active" id="content" >
    <article class="docs-container site-article-inner">
              <!-- custom breadcrumb -->
        <h5>
            <a href="../../index.html">Unofficial - F5 Certification Exam Prep Material</a>
              &gt; <a href="../class6.html">F5 301A - BIG-IP LTM Specialist Labs 11/01/19</a>
              &gt; <a href="module02.html">Lab 2 - Profiles</a>

          <span class="right">
             <a href="../../_sources/class6/module02/lab3.rst.txt" rel="nofollow">Source</a> |
             <a href="https://github.com/leifbr/f5-agility-labs-cert">Edit on <i class="fa fa-github" aria-hidden="true"></i></a>
          </span>
        </h5>
        <!-- end custom breadcrumb -->
      


    <!--a title="Export PDF" id="export-pdf" class="btn btn btn-link pull-right">View PDF</a-->
    <button type="button" id="export-pdf" class="btn btn-link right">PDF</button>


    
     
         <div class="sidebar" id="version-warning" style="display: none;">
           <p class="first sidebar-title">
           <span class="icon fa fa-info-circle fa-lg"></span> Version notice:</p>
           <p class="last" id="currentVersion"></p>
          </div>


     <div role="main">
        
  <div class="section" id="securing-web-applications">
<h1>Securing Web Applications<a class="headerlink" href="#securing-web-applications" title="Permalink to this headline">¶</a></h1>
<div class="section" id="securing-web-applications-with-the-http-profile">
<h2>Securing web applications with the HTTP profile<a class="headerlink" href="#securing-web-applications-with-the-http-profile" title="Permalink to this headline">¶</a></h2>
<p>Here you are going to perform some custom profile alterations to help
secure the web site. You are going to make sure hackers cannot see error
codes returned, scrub the response headers of extraneous and potentially
dangerous information and encrypt the persistence cookie to prevent
tampering.</p>
<p>Obtain the cookie name and information by browsing to
<strong>https://10.1.10.115/</strong> and open the <strong>Display Cookie</strong>. The cookie name is
everything in front of the <strong>=</strong> sign. How BIG-IP creates cookies for
Cookie Insert persistence can be found at <a class="reference external" href="https://support.f5.com/csp/article/K6917">https://support.f5.com/csp/article/K6917</a>. After reading this article you could craft a cookie to hit a particular server.</p>
<p><em>Q1. What is the cookie name? Note the information after the cookie.</em></p>
<p>Let’s begin by creating a custom HTTP profile.</p>
<table border="1" class="docutils">
<colgroup>
<col width="31%" />
<col width="33%" />
<col width="35%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name:</th>
<th class="head"><strong>secure-my-website</strong></th>
<th class="head">&#160;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Set the Fallback Host</td>
<td><strong>http://www.f5.com</strong></td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>Fallback on Error Codes</td>
<td><strong>404 500-505</strong></td>
<td>The fallback site if an error is received</td>
</tr>
<tr class="row-even"><td>Response Headers Allowed</td>
<td><strong>Content-Type Set-Cookie Location</strong></td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>Encrypt Cookies</td>
<td><strong>&lt;cookie name you obtained earlier&gt;</strong></td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>Cookie Encryption Passphrase</td>
<td><strong>xcookie</strong></td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>Confirm Cookie Encryption Passphrase</td>
<td><strong>xcookie</strong></td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>Insert XForwarded For</td>
<td><strong>Enable</strong></td>
<td>Example of modify headers</td>
</tr>
</tbody>
</table>
<p><em>Q2. What is in the X-Forwarded-For header? Why might you want to enable
it?</em></p>
<p>Attach your new HTTP Profile to your <strong>secure_vs</strong> virtual server</p>
<p>Browse to <strong>https://10.1.10.115</strong>.</p>
<p>Do the web pages appear normal? On the web page under, <strong>HTTP Request
and Response Information</strong> select the <strong>Request and Response Headers</strong>
link.</p>
<p>Open a new browser to <strong>http://10.1.10.100</strong>. On the web page under, <strong>HTTP
Request and Response Information</strong> select the <strong>Request and Response
Headers</strong> link.</p>
<p><em>Q3. Are they the same? What is different?</em></p>
<p>Now browse to a bad page.</p>
<p>For example, <strong>https://10.1.10.115/badpage</strong></p>
<p><em>Q4. What is the result?</em></p>
<p>Under, <strong>HTTP Request and Response Information</strong> select the <strong>Display
Cookie</strong> link.</p>
<p><em>Q5. What is different from the cookie at the start of the task?</em></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Even though the data is encrypted between your browser and the
virtual server, the LTM can still modify the data (i.e. resource
cloaking) because the data is unencrypted and decompressed within TMOS.</p>
</div>
</div>
<div class="section" id="using-irules">
<h2>Using iRules<a class="headerlink" href="#using-irules" title="Permalink to this headline">¶</a></h2>
<p>By now you should be thoroughly sick of trying to remember to type <a class="reference external" href="https://">https://</a> in
every time you want to access your secure web site. Not only is that
easily rectify on the BIG-IP, but it is much more secure than opening up
port 80 on your secure web servers, so that they can perform a redirect.</p>
<p>While it would be easy to write your own redirect iRule, you note F5 has
one prebuilt that you can use.</p>
<p>Example of simple redirect iRule:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">when</span> <span class="n">HTTP_REQUEST</span> <span class="p">{</span>
   <span class="n">HTTP</span><span class="p">::</span><span class="n">redirect</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="p">[</span><span class="n">HTTP</span><span class="p">::</span><span class="n">host</span><span class="p">][</span><span class="n">HTTP</span><span class="p">::</span><span class="n">uri</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Go to <strong>Local Traffic &gt; iRules</strong></p>
<p>In the search box at the top of the list of iRules, type <strong>redirect</strong>
and hit <strong>Search</strong>.</p>
<p>Open the iRule and take a quick look. This is a F5 Verified and F5
supported iRule.</p>
<p>Create your HTTP-to-HTTPS redirect virtual server.</p>
<p>Go to Local <strong>Traffic &gt; Virtual Servers</strong> and create a new virtual
server.</p>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">redirect_to_secure_vs</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Destination</td>
<td>&lt;same IP as secure_vs&gt;</td>
</tr>
<tr class="row-odd"><td>Service Port</td>
<td>80 (HTTP)</td>
</tr>
<tr class="row-even"><td>Source Address Translation</td>
<td>None &lt;you don’t need this, this traffic is going nowhere&gt;</td>
</tr>
<tr class="row-odd"><td>iRule</td>
<td>_sys_https_redirect</td>
</tr>
</tbody>
</table>
<p>Hit <strong>Finished</strong></p>
<p>WOW! That didn’t go too far did it. You just got an error. If you are
going to redirect the HTTP request you need the HOST and URI information
and that requires the HTTP protocol.</p>
<p>Test your new virtual by going to <strong>http://10.1.10.115</strong>.</p>
<p>You should be redirected to the HTTPS virtual server.</p>
<p>As you can see very small iRules can make a very big difference. On the
exam, you may be asked to identify the iRule that would best solve an
issue. So, you should be familiar with basic iRules syntax.</p>
</div>
</div>


     </div>
    
     <div class="row next-prev-btn-row">
       <div class="col-lg-12">
       
        <a href="lab2.html" title="Application Acceleration" accesskey="p" class="btn btn-primary left"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i> Previous</a>
       
       
          <a href="../module03/module03.html" title="Lab 3 - Application Visibilty and Reporting (AVR)" accesskey="n" class="btn btn-primary right">Next <i class="fa fa-arrow-circle-right" aria-hidden="true"></i></a>
       
     </div>
     </div>
    

    </article>
  </div>

</div>


  <div id="clouddocs-footer"></div>
  <!-- Bootstrap core JavaScript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->

  <script src="../../_static/js/index.js"></script>
  <script src="../../_static/js/jquery.appear.js"></script>
  <script src="../../_static/js/printThis.js"></script>
  <script src="../../_static/js/bootstrap.min.js"></script>
  <script src="../../_static/js/clouddocs.js"></script>
  <script src="../../_static/js/CoveoJsSearch.Lazy.min.js"></script>
  </body>
</html>