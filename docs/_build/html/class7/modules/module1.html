<!DOCTYPE html>
<head>
  
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-PPZPQ6');</script>
  <!-- End Google Tag Manager -->
    <title>F5 301b Introduction</title>
  

  <meta charset="utf-8">
  <!-- Twitter Bootstrap viewport setting -->
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <!-- F5 metadata -->
  <meta name="title" content="F5 301b Introduction"/>
  <meta name="product" content="Unofficial - F5 Certification Exam Prep Material"/>
  <meta name="version" content=""/>
  <meta name="updated_date"  content="2020-08-13 09:31:44"/>
  <meta name="archived" content="Archived documents excluded"/>
  <meta name="doc_type" content="Manual"/>
  <meta name="lifecycle" content="release"/>
  <meta name="Unofficial - F5 Certification Exam Prep Material" content=""/>


  

  
  <link href="https://cdn.f5.com/favicon.ico" rel="icon">

</head>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>F5 301b Introduction &#8212; Unofficial - F5 Certification Exam Prep Material  documentation</title>
    <link rel="stylesheet" href="../../_static/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/f5_agility_theme.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/f5.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/f5-theme.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/CoveoFullSearch.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css" />
    <link rel="stylesheet" type="text/css" href="https://use.fontawesome.com/21fb8a09c3.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Section 2 - Identify and Resolve Application Issues" href="module2.html" />
    <link rel="prev" title="F5 301B - BIG-IP LTM Specialist: Maintain and Troubleshoot Study Guide 11/01/19" href="../class7.html" /> 
  </head><body>
  <div id="clouddocs-header"></div>

    <div id="sidebar" class="section-nav">
      
      <!--  version selector ------------------>
      <div id="version_selector_wrapper">
      </div>
      <nav class="nav-sidebartoc">

        
         <h5>Unofficial - F5 Certification Exam Prep Material  </h5>
        

        <hr>
        <span class="nav-sidebartoc">
            <p class="caption"><span class="caption-text">Intro:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../intro.html">Getting Started with the F5 Certification Program 03/29/19</a></li>
</ul>
<p class="caption"><span class="caption-text">Unofficial - 101 Certification Exam Resources:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../class1/class1.html">F5 101 - App Delivery Fundamentals Study Guide 11/01/19</a></li>
</ul>
<p class="caption"><span class="caption-text">Unofficial - 201 Certification Exam Resources:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../class2/class2.html">F5 201 - TMOS Administration Study Guide 11/01/19</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../class3/class3.html">F5 201 - TMOS Administration Labs 08/11/2020</a></li>
</ul>
<p class="caption"><span class="caption-text">Unofficial - 202 Certification Exam Resources:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../class4/class4.html">F5 202 - Pre-Sales Fundamentals Study Guide 11/01/19</a></li>
</ul>
<p class="caption"><span class="caption-text">Unofficial - 301A Certification Exam Resources:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../class5/class5.html">F5 301A - BIG-IP LTM Specialist: Architect, Set-Up &amp; Deploy Study Guide 11/01/19</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../class6/class6.html">F5 301A - BIG-IP LTM Specialist Labs 11/01/19</a></li>
</ul>
<p class="caption"><span class="caption-text">Unofficial - 301B Certification Exam Resources:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../class7.html">F5 301B - BIG-IP LTM Specialist: Maintain and Troubleshoot Study Guide 11/01/19</a></li>
</ul>
<p class="caption"><span class="caption-text">Unofficial - 302 Certification Exam Resources:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../class9/class9.html">F5 302 - BIG-IP DNS Specialist Study Guide 11/01/19</a></li>
</ul>
<p class="caption"><span class="caption-text">Unofficial - 303 Certification Exam Resources:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../class11/class11.html">F5 303 - BIG-IP ASM Specialist Study Guide 11/01/19</a></li>
</ul>
<p class="caption"><span class="caption-text">Unofficial - 304 Certification Exam Resources:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../class13/class13.html">F5 304 - BIG-IP APM Specialist Study Guide 11/01/19</a></li>
</ul>
<p class="caption"><span class="caption-text">Unofficial - 401 Certification Exam Resources:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../class15/class15.html">F5 401 - Security Solution Expert Study Guide 11/01/19</a></li>
</ul>
<p class="caption"><span class="caption-text">Unofficial - 402 Certification Exam Resources:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../class17/class17.html">F5 402 - Cloud Solutions Study Guide 11/01/19</a></li>
</ul>

        </span><!-- Use this file to add extra links to the bottom of the ToC sidebar -->
<hr>
  <span class="nav-sidebartoc">
 <!-- insert content here -->
  </span>
      </nav>
    </div>


    <div id="right-sidebar">
      <h7 style="font-weight:normal">On this page:</h7>
      <nav class="nav-sidebartoc">
        <span class="nav-sidebartoc">
            <ul>
<li><a class="reference internal" href="#">F5 301b Introduction</a></li>
<li><a class="reference internal" href="#section-1-troubleshoot-basic-virtual-server-connectivity-issues">Section 1 – Troubleshoot Basic Virtual Server Connectivity Issues</a><ul>
<li><a class="reference internal" href="#objective-1-01-given-a-scenario-determine-the-appropriate-profile-setting-modifications">Objective - 1.01 - Given a scenario, determine the appropriate profile setting modifications</a></li>
<li><a class="reference internal" href="#objective-1-02-given-a-sub-set-of-an-ltm-configuration-determine-which-objects-to-remove-or-consolidate-to-simplify-the-ltm-configuration">Objective - 1.02 - Given a sub-set of an LTM configuration, determine which objects to remove or consolidate to simplify the LTM configuration</a></li>
<li><a class="reference internal" href="#objective-1-03-given-a-set-of-ltm-device-statistics-determine-which-objects-to-remove-or-consolidate-to-simplify-the-ltm-configuration">Objective - 1.03 - Given a set of LTM device statistics, determine which objects to remove or consolidate to simplify the LTM configuration</a></li>
<li><a class="reference internal" href="#objective-1-04-given-a-scenario-determine-the-appropriate-upgrade-and-recovery-steps-required-to-restore-functionality-to-ltm-devices">Objective - 1.04 - Given a scenario, determine the appropriate upgrade and recovery steps required to restore functionality to LTM devices</a></li>
<li><a class="reference internal" href="#objective-1-05-given-a-scenario-determine-the-appropriate-upgrade-steps-required-to-minimize-application-outages">Objective - 1.05 - Given a scenario, determine the appropriate upgrade steps required to minimize application outages</a></li>
<li><a class="reference internal" href="#objective-1-06-describe-the-benefits-of-custom-alerting-within-an-ltm-environment">Objective - 1.06 - Describe the benefits of custom alerting within an LTM environment</a></li>
<li><a class="reference internal" href="#objective-1-07-describe-how-to-set-up-custom-alerting-for-an-ltm-device">Objective - 1.07 - Describe how to set up custom alerting for an LTM device</a></li>
</ul>
</li>
</ul>

         </span>
      </nav>
    </div>





  
  <div class="main active" id="content" >
    <article class="docs-container site-article-inner">
              <!-- custom breadcrumb -->
        <h5>
            <a href="../../index.html">Unofficial - F5 Certification Exam Prep Material</a>
              &gt; <a href="../class7.html">F5 301B - BIG-IP LTM Specialist: Maintain and Troubleshoot Study Guide 11/01/19</a>

          <span class="right">
             <a href="../../_sources/class7/modules/module1.rst.txt" rel="nofollow">Source</a> |
             <a href="https://github.com/leifbr/f5-agility-labs-cert">Edit on <i class="fa fa-github" aria-hidden="true"></i></a>
          </span>
        </h5>
        <!-- end custom breadcrumb -->
      


    <!--a title="Export PDF" id="export-pdf" class="btn btn btn-link pull-right">View PDF</a-->
    <button type="button" id="export-pdf" class="btn btn-link right">PDF</button>


    
     
         <div class="sidebar" id="version-warning" style="display: none;">
           <p class="first sidebar-title">
           <span class="icon fa fa-info-circle fa-lg"></span> Version notice:</p>
           <p class="last" id="currentVersion"></p>
          </div>


     <div role="main">
        
  <div class="section" id="f5-301b-introduction">
<h1>F5 301b Introduction<a class="headerlink" href="#f5-301b-introduction" title="Permalink to this headline">¶</a></h1>
<div class="line-block">
<div class="line"><br /></div>
</div>
<iframe width="560" height="315" src="https://www.youtube.com/embed/3uDzuRZ47FA?rel=0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe><div class="line-block">
<div class="line"><br /></div>
</div>
<hr class="docutils" />
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>F5 – 301b Local Traffic Manager Specialist Exam</strong></p>
<p>The F5 BIG-IP Local Traffic Manager (LTM) increases an application’s
operational efficiency and ensures peak network performance by providing
a flexible, high-performance application delivery system. With its
application-centric perspective, LTM optimizes your network
infrastructure to deliver availability, security, and performance for
critical business applications. Although the Exam Blueprint is not
written in a structure that presents topics in an educational order, it
does provide many of the necessary building blocks. The Certified LTM
Training classes from F5 will help with many of the scenario-based
topics on the test. An LTM Specialist must be proficient with all
aspects of maintaining and troubleshooting the LTM within a network.</p>
<p><strong>Traffic Management Shell</strong></p>
<p>Although it is not mentioned in the blueprint as a requirement, a
candidate should not focus only on the GUI interface for management of
the LTM platform. Some test questions will refer to the command line
interface (CLI) TMSH commands. You should take time to understand where
in the CLI that common commands are issued so you can not only correctly
answer the questions presented on the exam but also have enough
knowledge of the CLI structure to eliminate bad commands from your
question’s answer choices.</p>
<p>Try building your vLab environment from command line to gain CLI
proficiency. Hands-on experience is the key to passing this exam.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="section-1-troubleshoot-basic-virtual-server-connectivity-issues">
<h1>Section 1 – Troubleshoot Basic Virtual Server Connectivity Issues<a class="headerlink" href="#section-1-troubleshoot-basic-virtual-server-connectivity-issues" title="Permalink to this headline">¶</a></h1>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
<div class="section" id="objective-1-01-given-a-scenario-determine-the-appropriate-profile-setting-modifications">
<h2>Objective - 1.01 - Given a scenario, determine the appropriate profile setting modifications<a class="headerlink" href="#objective-1-01-given-a-scenario-determine-the-appropriate-profile-setting-modifications" title="Permalink to this headline">¶</a></h2>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
<p><strong>1.01 – Given a scenario of client or server side buffer issues, packet
loss, or congestion, select the appropriate TCP or UDP profile to
correct the issue</strong></p>
<p><a class="reference external" href="https://support.f5.com/csp/article/K13924148">https://support.f5.com/csp/article/K13924148</a></p>
<p><strong>Congestion Control</strong></p>
<p>The default TCP Profile has the following settings related to congestion
control.</p>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="6%" />
<col width="75%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Setting</strong></td>
<td><strong>Default Value</strong></td>
<td><strong>Description</strong></td>
</tr>
<tr class="row-even"><td>Appropriate Byte Counting (<a class="reference external" href="http://datatracker.ietf.org/doc/rfc3465/">RFC 3465</a>)</td>
<td>Enabled</td>
<td>This setting increases the congestion window by basing the increase amount on the number of previously-unacknowledged bytes that each ACK covers.</td>
</tr>
<tr class="row-odd"><td>Congestion Metrics Cache</td>
<td>Enabled</td>
<td>This setting specifies that the system uses a cache for storing congestion metrics.</td>
</tr>
<tr class="row-even"><td>Congestion Control</td>
<td>High Speed</td>
<td><p class="first">This setting specifies the congestion control mechanism that the BIG-IP system uses.</p>
<p>Available options:</p>
<ul class="last simple">
<li><strong>None</strong>: No congestion control algorithm implemented.</li>
<li><strong>High Speed</strong>: A more aggressive, loss-based algorithm. For more information, refer to <a class="reference external" href="http://datatracker.ietf.org/doc/rfc3649/">RFC 3649</a>: HighSpeed TCP for Large Congestion Windows.</li>
<li><strong>New Reno</strong>: A modification to the Reno algorithm that responds to partial acknowledgments when selective acknowledgments (SACK) are unavailable. For more information, refer to <a class="reference external" href="http://datatracker.ietf.org/doc/rfc2582/">RFC 2582</a>: The NewReno Modification to TCP’s Fast Recovery Algorithm.</li>
<li><strong>Reno</strong>: An implementation of the TCP Fast Recovery algorithm, based on the implementation in the BSD Reno release. For more information, refer to <a class="reference external" href="http://datatracker.ietf.org/doc/rfc2581/">RFC 2581</a>: TCP Congestion Control.</li>
<li><strong>Scalable</strong>: A TCP algorithm modification that adds a scalable, delay-based and loss-based component into the Reno algorithm. This option is used in conjunction with the <strong>Appropriate Byte Counting</strong> setting.</li>
<li><strong>CUBIC</strong> (11.6.0 and later): Specifies that the system uses a TCP algorithm that is optimized for high bandwidth, high delay networks.</li>
<li><strong>Westwood+</strong> (11.6.0 and later): Specifies that the system uses a TCP algorithm based on a bandwidth estimation metric.</li>
<li><strong>CAIA Delay Gradient (CDG)</strong> (11.5.0 and later): Specifies that the system uses a delay based TCP that senses onset of congestion by variations in round trip time (RTT).</li>
<li><strong>CAIA Hamilton Delay (CHD)</strong> (11.5.0 and later): Specifies that the system uses a TCP algorithm that aims to keep network queuing delays below a particular threshold (queue_threshold) and decides to reduce the congestion window (cwnd) probabilistically based on its estimate of the network queuing delay.</li>
<li><strong>Illinois</strong> (11.5.0 and later): Specifies that the system uses a TCP algorithm that is especially targeted at high-speed, long-distance networks.</li>
<li><strong>Vegas</strong> (11.5.0 and later): Specifies that the system uses a TCP algorithm modification that adds a delay-based and loss-based component into the Reno algorithm.</li>
<li><strong>Woodside</strong> (11.5.0 and later): Specifies that the system uses a TCP algorithm that is especially targeted at high-speed, long-distance networks with enhanced congestion recovery.</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>Delay Window Control</td>
<td>Disabled</td>
<td>When enabled, this setting specifies that the system uses an estimate of queuing delay as a measure of congestion to control the amount of data sent (in addition to the normal loss-based control).</td>
</tr>
<tr class="row-even"><td>Explicit Congestion Notification</td>
<td>Disabled</td>
<td><p class="first">When enabled, this setting specifies that the system uses the TCP flags CWR (Congestion Window Reduced) and ECE (ECN-Echo, used to indicate that the TCP peer is Explicit Congestion Notification capable during the three-way handshake) to notify its peer of congestion and congestion counter-measures.</p>
<p class="last"><strong>*Note</strong>: When this setting is enabled, it is used only when two hosts signal that they want to use it. This setting allows a host to set the ECN bit within the IP header to notify the transmitter that the link is congested.*</p>
</td>
</tr>
<tr class="row-odd"><td>Initial Congestion Window Size</td>
<td>0 MSS units</td>
<td>This setting specifies the initial congestion window size for connections to this destination. Actual window size is this value multiplied by the MSS for the same connection. The default value is 0 (zero), meaning that the system uses the values specified in <a class="reference external" href="http://datatracker.ietf.org/doc/rfc2414/">RFC 2414</a>. Valid values range from&nbsp;0&nbsp;to&nbsp;16.</td>
</tr>
<tr class="row-even"><td>Packet Loss Ignore Burst</td>
<td>0 packet count</td>
<td>This setting specifies the probability of performing congestion control when multiple packets are lost, even if the <strong>Packet Loss Ignore Rate</strong> value was not exceeded. Valid values range from 0 to 32. The default value is 0, meaning that the system performs congestion control if any packets are lost. Higher values decrease the chance of performing congestion control.</td>
</tr>
<tr class="row-odd"><td>Packet Loss Ignore Rate</td>
<td>0 packets lost per million</td>
<td>This setting specifies the threshold of packets lost per million at which the system performs congestion control. Valid values range from 0 to 1,000,000. The default value is 0, meaning the system performs congestion control if any packet loss occurs. If you set the ignore rate to 10 and packet loss for a TCP connection is greater than 10 per million, congestion control occurs.</td>
</tr>
<tr class="row-even"><td><p class="first">Rate Pace</p>
<p class="last">(11.5.0 and later)</p>
</td>
<td>Disabled</td>
<td>The system paces the egress packets to avoid dropping packets, allowing for optimum goodput. This option mitigates bursty behavior in mobile networks.</td>
</tr>
<tr class="row-odd"><td>Slow Start</td>
<td>Enabled</td>
<td>This setting specifies that the system uses larger initial window sizes, as specified in&nbsp; <a class="reference external" href="http://datatracker.ietf.org/doc/rfc3390/">RFC 3390</a>: Increasing TCP’s Initial Window, to help reduce round trip times. TCP slow-start congestion avoidance is a method of converging on the right amount of data to put on the link without overloading the link in order to prevent packets from being dropped.</td>
</tr>
<tr class="row-even"><td><p class="first">Timestamps Extension for High Performance (<a class="reference external" href="http://datatracker.ietf.org/doc/rfc1323/">RFC 1323</a>)</p>
<p class="last">(11.4.0 and later)</p>
</td>
<td>Enabled</td>
<td><p class="first">This setting specifies that the system uses the timestamp extensions for TCP, as specified in&nbsp; <a class="reference external" href="http://datatracker.ietf.org/doc/rfc1323/">RFC 1323</a>, to enhance high-speed network performance. The timestamp option allows for accurate RTT measurement, in addition to simplifying window calculations for the sender.</p>
<blockquote class="last">
<div><strong>Note:</strong> Beginning in BIG-IP 11.4.0, the window scale functionality is built into the TCP profile and cannot be manually disabled or enabled. The functionality will be negotiated if the send or receive buffer is larger than 65535 bytes. This option only controls the Timestamp functionality.</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p><strong>Virtual Server Layer4 Protocol Settings</strong></p>
<p>The BIG-IP system provides a variety of Layer4 profiles that have been
modified to optimize traffic processing for a number of popular network
environments. Choosing an optimized TCP profile may greatly improve
performance compared to using the default TCP profile.</p>
<hr class="docutils" />
<p><strong>Using optimized TCP profiles</strong></p>
<p><a class="reference external" href="https://support.f5.com/csp/article/K76314423">https://support.f5.com/csp/article/K76314423</a></p>
<p><strong>tcp-mobile-optimized</strong></p>
<p>Introduced in BIG-IP 11.5.0, the tcp-mobile-optimized profile is a
modified TCP protocol profile for use when the BIG-IP system is load
balancing traffic from 3G and 4G cellular networks.</p>
<p>If you use a standard virtual server with a TCP profile to process
strictly 3G and/or 4G cellular based traffic, you can configure your
virtual server to use the tcp-mobile-optimized profile to enhance
cell-based traffic processing. When the BIG-IP system proxies cellular
traffic, client side connections to the virtual server are generally
slower than the server side connections to pool members, resulting in a
greater amount of data the BIG-IP must buffer. Increasing buffer sizes
allows the BIG-IP system to accept more data and better manage the
disparity in connection speeds also known as content spooling. For more
information on content spooling, refer to K3422: Overview of content
spooling. Additionally, the tcp-mobile-optimized profile increases the
Initial Congestion Window size to reduce round trip times (RTT) and
enables Nagle’s Algorithm to reduce the number of smaller TCP packets on
the network.</p>
<p>Modified options in the tcp-mobile-optimized profile</p>
<p>The tcp-mobile-optimized profile contains the following modifications to
the default TCP profile:</p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="5%" />
<col width="82%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Setting</td>
<td>Value</td>
<td>Description</td>
</tr>
<tr class="row-even"><td>Proxy Buffer Low</td>
<td>131072 bytes</td>
<td><p class="first">Specifies the proxy buffer level at which the receive window was opened.</p>
<p class="last">This value is increased to accommodate larger bandwidth links and content spooling that may occur.</p>
</td>
</tr>
<tr class="row-odd"><td>Proxy Buffer High</td>
<td>131072 bytes</td>
<td><p class="first">Specifies the proxy buffer level at which the receive window is no longer advanced.</p>
<p class="last">This value is increased to accommodate larger bandwidth links and content spooling that may occur.</p>
</td>
</tr>
<tr class="row-even"><td>Send Buffer</td>
<td>131072 bytes</td>
<td><p class="first">Specifies the BIG-IP system’s send buffer size in bytes.</p>
<p class="last">This value is increased to allow the BIG-IP to send more data.</p>
</td>
</tr>
<tr class="row-odd"><td>Receive Window</td>
<td>131072 bytes</td>
<td><p class="first">Specifies the BIG-IP system’s receive window size in bytes.</p>
<p class="last">This value is increased to allow the BIG-IP to receive more data.</p>
</td>
</tr>
<tr class="row-even"><td>Reset on Timeout</td>
<td>Disabled</td>
<td>Specifies that the system sends a reset packet (RST) in addition to deleting the connection, when a connection exceeds the idle timeout value.</td>
</tr>
<tr class="row-odd"><td>Delayed ACKs</td>
<td>Disabled</td>
<td><p class="first">Specifies if the BIG-IP system can send fewer than one ACK (acknowledgment) packet per data packet received.</p>
<p class="last">Enabling Delayed ACK and Nagle’s Algorithm may cause latency when single small packets are sent or received.</p>
</td>
</tr>
<tr class="row-even"><td>Appropriate Byte Counting (ABC)</td>
<td>Disabled</td>
<td><p class="first">Specifies if the BIG-IP system increases the congestion window by basing the increase amount on the number of previously unacknowledged bytes that each ACK covers.</p>
<p class="last">Disabled as ABC may not perform optimally when applications send small amounts of data.</p>
</td>
</tr>
<tr class="row-odd"><td>Initial Congestion Window Size</td>
<td>16</td>
<td><p class="first">Specifies the initial congestion window size for connections to this destination. Actual window size is this value multiplied by the MSS (Maximum Segment Size) for the same connection.</p>
<p class="last">Larger initial congestion windows may improve performance of TCP connections over satellite channels.</p>
</td>
</tr>
<tr class="row-even"><td>Explicit Congestion Notification (ECN)</td>
<td>Enabled</td>
<td><p class="first">Specifies that the BIG-IP system uses the TCP flags Congestion Window Reduced (CWR) and ECN-Echo (ECE) to notify peers of impending congestion.</p>
<p class="last">Instead of dropping packets an ECN-aware peer will reduce the packet transmission rate.</p>
</td>
</tr>
<tr class="row-odd"><td>Nagle’s Algorithm</td>
<td>Enabled</td>
<td>Specifies that the BIG-IP system uses Nagle’s algorithm to reduce the number of short segments on the network by holding data until the peer system acknowledges outstanding segments. This helps to reduce congestion by creating fewer packets on the network.</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<p><a class="reference external" href="https://support.f5.com/csp/article/K7405">https://support.f5.com/csp/article/K7405</a></p>
<p><strong>tcp-wan-optimized</strong></p>
<p>The tcp-wan-optimized profile is a pre-configured profile type. In cases
where the BIG-IP system is load balancing traffic over a WAN link, you
can enhance the performance of your wide-area TCP traffic by using the
tcp-wan-optimized profile.</p>
<p>If the traffic profile is strictly WAN-based, and a standard virtual
server with a TCP profile is required, you can configure your virtual
server to use the tcp-wan-optimized profile to enhance WAN-based
traffic. For example, in many cases, the client connects to the BIG-IP
virtual server over a WAN link, which is generally slower than the
connection between the BIG-IP system and the pool member servers. As a
result, the BIG-IP system can accept the data more quickly, allowing
resources on the pool member servers to remain available. By configuring
your virtual server to use the tcp-wan-optimized profile, you can
increase the amount of data the BIG-IP system will buffer while waiting
for a remote client to accept it. Additionally, you can increase network
throughput by reducing the number of short TCP segments the BIG-IP
system sends on the network.</p>
<p>Optimized settings and definitions in the tcp-wan-optimized profile</p>
<p>The following table describes settings of the tcp-wan-optimized profile
that may differ from the parent default TCP profile in order to optimize
WAN traffic.</p>
<table border="1" class="docutils">
<colgroup>
<col width="7%" />
<col width="4%" />
<col width="89%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Setting</td>
<td>Value</td>
<td>Description</td>
</tr>
<tr class="row-even"><td>Proxy Buffer Low</td>
<td>131072</td>
<td>This setting specifies the proxy buffer level at which the receive window was opened. For more information, refer to <a class="reference external" href="https://support.f5.com/csp/article/K3422">K3422: Overview of content spooling</a>.</td>
</tr>
<tr class="row-odd"><td>Proxy Buffer High</td>
<td>131072</td>
<td>This setting specifies the proxy buffer level at which the receive window is no longer advanced. For more information, refer to <a class="reference external" href="https://support.f5.com/csp/article/K3422">K3422: Overview of content spooling</a>.</td>
</tr>
<tr class="row-even"><td>Send Buffer</td>
<td>65535</td>
<td>This setting causes the BIG-IP system to send the buffer size in bytes. To optimize LAN-based traffic, this setting should be at least 64 K in order to allow the BIG-IP system to output more data at a time, if it is allowed by the congestion window.</td>
</tr>
<tr class="row-odd"><td>Receive Window</td>
<td>65535</td>
<td>This setting causes the BIG-IP system to receive the window size in bytes. If this setting is set too low in a LAN environment it can cause delays, as some systems inhibit data transfers if the receive window is too small.</td>
</tr>
<tr class="row-even"><td>Selective ACKs</td>
<td>Enabled</td>
<td>When this setting is enabled, the BIG-IP system can inform the data sender about all segments that it has received, allowing the sender to retransmit only the segments that have been lost.</td>
</tr>
<tr class="row-odd"><td>Nagle’s Algorithm</td>
<td>Enabled</td>
<td>When this setting is enabled, the BIG-IP system applies Nagle’s algorithm to reduce the number of short segments on the network by holding data until the peer system acknowledges outstanding segments.</td>
</tr>
</tbody>
</table>
<p>To display all tcp-wan-optimized profile settings and values for your
specific version, you can use the following Traffic Management Shell
(tmsh) command:</p>
<p>tmsh list ltm profile tcp tcp-wan-optimized all-properties</p>
<hr class="docutils" />
<p><a class="reference external" href="https://support.f5.com/csp/article/K7406">https://support.f5.com/csp/article/K7406</a></p>
<p><strong>tcp-lan-optimized</strong></p>
<p>The tcp-lan-optimized profile is a preconfigured profile type that can
be associated with a virtual server. In cases where the BIG-IP virtual
server is load balancing LAN-based or interactive traffic, you can
enhance the performance of your local-area TCP traffic by using the
tcp-lan-optimized profile.</p>
<p>If the traffic profile is strictly LAN-based, or highly interactive, and
a standard virtual server with a TCP profile is required, you can
configure your virtual server to use the tcp-lan-optimized profile to
enhance LAN-based or interactive traffic. For example, applications
producing an interactive TCP data flow such as secure shell (SSH) and
TELNET, normally generate a TCP packet for each keystroke. A TCP profile
setting such as Slow Start or Nagle’s Algorithm can introduce latency
when this type of traffic is being processed. By configuring your
virtual server to use the tcp-lan-optimized profile, you can ensure that
LAN-based or interactive traffic is delivered without delay.</p>
<p>Settings and definitions in the tcp-lan-optimized profile</p>
<p>The following table describes settings of the tcp-lan-optimized profile
that may differ from the parent default TCP profile in order to optimize
LAN traffic.</p>
<table border="1" class="docutils">
<colgroup>
<col width="4%" />
<col width="2%" />
<col width="94%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Setting</td>
<td>Value</td>
<td>Description</td>
</tr>
<tr class="row-even"><td>Proxy Buffer Low</td>
<td>98304</td>
<td>This setting specifies the proxy buffer level at which the receive window was opened. For more information, refer to <a class="reference external" href="https://support.f5.com/csp/article/K3422">K3422: Overview of content spooling</a>.</td>
</tr>
<tr class="row-odd"><td>Proxy Buffer High</td>
<td>131072</td>
<td>This setting specifies the proxy buffer level at which the receive window is no longer advanced. For more information, refer to <a class="reference external" href="https://support.f5.com/csp/article/K3422">K3422: Overview of content spooling</a>.</td>
</tr>
<tr class="row-even"><td>Send Buffer</td>
<td>65535</td>
<td>This setting causes the BIG-IP system to send the buffer size in bytes. To optimize LAN-based traffic, this setting should be at least 64K in order to allow the BIG-IP system to output more data at a time, if allowed by the congestion window.</td>
</tr>
<tr class="row-odd"><td>Receive Window</td>
<td>65535</td>
<td>This setting causes the BIG-IP system to receive the window size in bytes. If this setting is set too low in a LAN environment it can cause delays, as some systems inhibit data transfers if the receive window is too small.</td>
</tr>
<tr class="row-even"><td>Slow Start</td>
<td>Disabled</td>
<td>When enabled (selected), this setting specifies that the system uses larger initial window sizes (as specified in <a class="reference external" href="ftp://ftp.rfc-editor.org/in-notes/rfc3390.txt">Internet Engineering Task Force (RFC 3390)</a>) to help reduce round trip times.</td>
</tr>
<tr class="row-odd"><td>Bandwidth Delay</td>
<td>Disabled</td>
<td>When this setting is enabled, the system attempts to calculate the optimal bandwidth to use to the client, based on throughput and round-trip time, without exceeding the available bandwidth. This setting should be disabled in the following cases: the traffic profile is interactive; the client exhibits stretch ACKs; or the acknowledgment packets cover more than two segments of previously unacknowledged data. <em>Note: This setting is deprecated and no longer appears in BIG-IP 11.2.1 and later versions.</em></td>
</tr>
<tr class="row-even"><td>Nagle’s Algorithm</td>
<td>Disabled</td>
<td>When this setting is enabled, the BIG-IP system applies Nagle’s algorithm to reduce the number of short segments on the network by holding data until the peer system acknowledges outstanding segments.</td>
</tr>
<tr class="row-odd"><td>Acknowledge on Push</td>
<td>Enabled</td>
<td>When this setting is enabled it improves performance to Windows and MacOS peers who produce a small send buffer.</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<p><a class="reference external" href="https://support.f5.com/csp/article/K7535">https://support.f5.com/csp/article/K7535</a></p>
<p><strong>UDP</strong></p>
<p>Even though UDP is a connectionless protocol, the F5 BIG-IP is a full
proxy device and can accept the UDP traffic and will keep an inbound
connection in the state table. The most important setting in the UDP
profile for network performance issues is the idle timeout setting.</p>
<p>Settings and definitions in the UDP profile are defined in the following
table:</p>
<table border="1" class="docutils">
<colgroup>
<col width="4%" />
<col width="5%" />
<col width="91%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Setting</strong></td>
<td><strong>Default value</strong></td>
<td><strong>Description</strong></td>
</tr>
<tr class="row-even"><td>Proxy Maximum Segment</td>
<td>Disabled (Not Selected)</td>
<td>When enabled, this setting specifies that the system advertises the same maximum segment size (MSS) to the server as that of the client. This option is available in BIG-IP LTM 11.0.0 and later.</td>
</tr>
<tr class="row-odd"><td>Idle Timeout</td>
<td>Specify: 60 seconds</td>
<td><p class="first">This setting specifies the length of time that a connection is idle before the connection is eligible for deletion. The Idle Timeout setting allows the BIG-IP LTM to create a connection entry. UDP is a connectionless protocol and does not behave in the same manner as TCP. By default, the BIG-IP LTM treats UDP packets from the same source and port as part of a connection.</p>
<p>Available options:</p>
<ul class="simple">
<li>Specify: User specified amount of time (in seconds) the UDP connection can remain idle before it can be deleted</li>
<li>Immediate: Specifies that you do not want the UDP connection to remain idle and that it is immediately eligible for deletion</li>
<li>Indefinite: Specifies that the UDP connection can remain idle indefinitely</li>
</ul>
<p class="last"><em>Note: Specifying an indefinite idle timeout for connectionless protocols such as UDP can lead to stalled connections and resource shortages.</em></p>
</td>
</tr>
<tr class="row-even"><td>IP ToS</td>
<td>0</td>
<td><p class="first">This setting specifies the Layer 3 (L3) Type of Service (ToS) level that the system inserts in the UDP datagrams destined for clients. The IP ToS is part of the TCP/IP protocol and is primarily used for ToS Application Routing, which is supported by OSPF and IS-IS. It allows the administrator to specify the importance and routing preference the packet should be given on a supported network. For more information regarding ToS Precedence values and a description of ToS Application Routing, refer to the following RFC’s:</p>
<ul class="last simple">
<li>RFC 791: INTERNET PROTOCOL</li>
<li>RFC 1583: OSPF Version 2</li>
<li>RFC 2474: Definition of the Differentiated Services Field (DS Field) in the IPv4 and IPv6 Headers</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>Link QoS</td>
<td>0</td>
<td><p class="first">This setting specifies the Layer 2 (L2) Quality of Service (QoS) level that the system inserts in the TCP packets destined for clients. The Link QoS is used to specify the QoS level that the system assigns to the UDP datagrams when sending to a client. These values are similar to IP ToS, but are applied to the link layer or L2. For more information regarding QoS, refer to the following RFCs:</p>
<ul class="last simple">
<li>RFC 2474: Definition of the Differentiated Services Field (DS Field) in the IPv4 and IPv6 Headers</li>
<li>RFC 2697: A Single Rate Three Color Marker</li>
<li>RFC 2597: Assured Forwarding PHB Group</li>
<li>RFC 2598: An Expedited Forwarding PHB</li>
</ul>
</td>
</tr>
<tr class="row-even"><td>Datagram LB</td>
<td>Disabled (Not Selected)</td>
<td>The Datagram LB option, which is disabled by default, specifies that the system load balances UDP traffic packet-by-packet and does not treat UDP packets from the same source and port as part of a connection. This setting overrides the default behavior of the UDP profile.</td>
</tr>
<tr class="row-odd"><td>Allow No Payload</td>
<td>Disabled (Not Selected)</td>
<td>Allows UDP datagrams that have no payload (Contains only the UDP header) through the system.</td>
</tr>
<tr class="row-even"><td>TTL Mode1</td>
<td>Proxy</td>
<td><p class="first">This setting specifies the outgoing UDP packet’s Time-to-live (TTL) mode.</p>
<p>Available options:</p>
<ul class="simple">
<li><strong>Proxy</strong>: Sets the IP TTL of IPv4 to the default value of 255, and IPv6 to the default value of 64.</li>
<li><strong>Preserve</strong>: Sets the IP TTL to the original packet TTL value.</li>
<li><strong>Decrement</strong>: Sets the IP TTL to the original packet TTL value minus 1.</li>
<li><strong>Set</strong>: Sets the IP TTL to the values specified in TTL IPv4 and TTL IPv6.</li>
</ul>
<p class="last"><strong>*Note</strong>: The <strong>Set</strong> value is available in 12.1.0 and later.*</p>
</td>
</tr>
<tr class="row-odd"><td>Don’t Fragment Mode2</td>
<td>PMTU</td>
<td><p class="first">This setting controls the Don’t Fragment (DF) bit in the outgoing UDP packet.</p>
<p>Available options:</p>
<ul class="simple">
<li><strong>PMTU</strong>: Sets the outgoing UDP packet DF bit based on the IP Path Maximum Transmission Unit (PMTU) setting.</li>
<li><strong>Preserve</strong>: Preserve the incoming UDP packet DF bit for the outgoing UDP packet.</li>
<li><strong>Enable</strong>: Sets the outgoing UDP packet DF bit.</li>
<li><strong>Disable</strong>: Clear the outgoing UDP packet DF bit.</li>
</ul>
<p class="last"><strong>*Note</strong>: In <strong>PMTU</strong>, the&nbsp; <strong>TM.PathMTUDiscovery</strong> database variable controls the <strong>PMTU</strong> setting.*</p>
</td>
</tr>
<tr class="row-even"><td>Max Buffer Bytes3</td>
<td>655350 (bytes)</td>
<td>This setting specifies ingress buffer byte limit. Maximum allowed value is 16777215. This option is available in BIG-IP LTM 13.0.0 and later.</td>
</tr>
<tr class="row-odd"><td>Max Buffer Packets3</td>
<td>0</td>
<td>This setting specifies ingress buffer packet limit. Maximum allowed value is 255.</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>1.01 – Given a scenario determine when an application would benefit from HTTP Compression and/or Web Acceleration profile</strong></p>
<p><strong>Compression</strong></p>
<p>Even though the internet speed is increasing, there are users that still
have slow internet access and adding compression to a website can speed
up performance for them. The BIG-IP can provide simple Compression or
Caching of data that can help with this need.</p>
<hr class="docutils" />
<p><a class="reference external" href="https://support.f5.com/csp/article/K15434">https://support.f5.com/csp/article/K15434</a></p>
<p>When you configure an HTTP Compression profile and assign it to a
virtual server, the BIG-IP system reads the Accept-Encoding header of a
client request and determines what content encoding method the client
prefers. The BIG-IP system then removes the Accept-Encoding header from
the request and passes the request to the server. Upon receiving the
server response, the BIG-IP system inserts the Content-Encoding header,
specifying either the gzip or deflate, based on the compression method
that the client specifies in the Accept-Encoding header.</p>
<p>Note: Compression of data can cause latency so tuning may be necessary
to find the best configuration for each environment.</p>
<hr class="docutils" />
<p><strong>Web Acceleration profile</strong></p>
<p><a class="reference external" href="https://support.f5.com/csp/article/K14903">https://support.f5.com/csp/article/K14903</a></p>
<p>The Web Acceleration profile provides settings to configure HTTP caching
for the BIG-IP system. HTTP caching allows the BIG-IP system to store
frequently requested web objects in memory for reuse by subsequent
connections.</p>
<p>You can enable HTTP caching on the BIG-IP system by associating a Web
Acceleration profile with a virtual server. An HTTP cache is a
collection of HTTP objects stored in the BIG-IP system’s memory that
subsequent connections can reuse to reduce traffic load on the origin
web servers. The goal of caching is to reduce the need to send frequent
requests for the same object and eliminate the need to send full
responses in many cases.</p>
<p><strong>Cacheable content</strong></p>
<p>You can configure the BIG-IP cache feature to cache the following
content types:</p>
<ul class="simple">
<li>200, 203, 300, 301, and 410 HTTP responses</li>
<li>Responses to HTTP GET requests</li>
<li>Other HTTP methods for URIs specified for inclusion in cached
content, or specified in an iRule</li>
<li>Content based on the User-Agent and Accept-Encoding values. The cache
feature holds different content for Vary headers.</li>
</ul>
<p>The default cache configuration caches only responses to HTTP GET
requests. However, you can configure the Web Acceleration profile to
cache other requests, including non-HTTP requests. To do this, you can
specify a URI in the URI Include Override List or Pin List within a Web
Acceleration profile, or write an iRule.</p>
<p><strong>Non-cacheable content</strong></p>
<p>The cache feature does not cache the following items:</p>
<ul class="simple">
<li>Data specified by the following Cache-Control headers: private,
no-store, no-cache</li>
<li>Action-oriented HTTP methods such as HEAD, PUT, DELETE, TRACE, and
CONNECT</li>
</ul>
<p><strong>Recommendations</strong></p>
<p>When you configure the Web Acceleration profile for a virtual server,
you should consider the following factors:</p>
<ul class="simple">
<li>Caching is useful for frequently-requested content; for example,
caching can be used if the site has periods of high demand for
specific content. When you configure a Web Acceleration profile for a
virtual server, the content server only has to serve the content to
the BIG-IP system once per expiration period.</li>
<li>Caching is useful if a site contains a large amount of static content
such as CSS files, JavaScript files, or images.</li>
<li>For compressible data, the cache feature can store data for clients
that accept compressed data. When used with the compression feature
on the BIG-IP system, the cache takes stress off of the BIG-IP system
and the content servers.</li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
<iframe width="560" height="315" src="https://www.youtube.com/embed/3uDzuRZ47FA?rel=0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe><div class="line-block">
<div class="line"><br /></div>
</div>
<hr class="docutils" />
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="objective-1-02-given-a-sub-set-of-an-ltm-configuration-determine-which-objects-to-remove-or-consolidate-to-simplify-the-ltm-configuration">
<h2>Objective - 1.02 - Given a sub-set of an LTM configuration, determine which objects to remove or consolidate to simplify the LTM configuration<a class="headerlink" href="#objective-1-02-given-a-sub-set-of-an-ltm-configuration-determine-which-objects-to-remove-or-consolidate-to-simplify-the-ltm-configuration" title="Permalink to this headline">¶</a></h2>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
<p><strong>1.02 - Evaluate which iRules can be replaced with a profile or policy setting</strong></p>
<p><a class="reference external" href="https://support.f5.com/csp/article/K15085">https://support.f5.com/csp/article/K15085</a></p>
<p><strong>Interpret Configuration</strong></p>
<p>The Local Traffic Policies comprise a prioritized list of rules that
match defined conditions and run specific actions, which you can assign
to a virtual server that directs traffic accordingly. For example, you
might create a policy that determines whether a client’s browser is a
Chrome browser and adds an Alternative-Protocols attribute to the
header, so that subsequent requests from the Chrome browser are directed
to a SPDY virtual server. Or you might create a policy that determines
whether a client is using a mobile device, and then redirects its
requests to the applicable mobile web site’s URL.</p>
<hr class="docutils" />
<p><a class="reference external" href="https://devcentral.f5.com/articles/ltm-policy">https://devcentral.f5.com/articles/ltm-policy</a></p>
<p>iRules are an important and long-standing part of the BIG-IP
architecture, and pervasive throughout the product. There is some
overlap between what can be controlled by LTM Policy and iRules, not
surprisingly that most of the overlap is in the realm of HTTP traffic
handling. And just about anything that is possible in LTM Policy can
also be written as an iRule.</p>
<p>LTM Policy is a structured, data-driven collection of rules. iRules and
Tcl are more of a general purpose programming language which provide
lots of power and flexibility, but also require some programming skills.
Because policies are structured and can be created by populating tables
in a web UI, it is more approachable for those with limited programming
skills.</p>
<p>So, when to use LTM Policy and when to use iRules? As a general rule,
where there is identical functionality, LTM Policy should be able to
offer better performance. There are situations where LTM Policy may be a
better choice.</p>
<ul class="simple">
<li>when rules need to span different events, (e.g. a rule that considers
both request and response)</li>
<li>dealing with HTTP headers and cookies (e.g. LTM Policy has more
direct access to internal HTTP state)</li>
<li>when there are large number of conditions (pre-compiled internal
decision trees can evaluate conditions in parallel)</li>
<li>when conditions have a lot of commonality</li>
</ul>
<p>For supported events (such as HTTP_REQUEST or HTTP_RESPONSE), LTM
Policy evaluation occurs before iRule evaluation. This means that it is
possible to write an iRule to override an LTM Policy decision.</p>
<hr class="docutils" />
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>1.02 - Evaluate which host virtual servers would be better consolidated into a network virtual server</strong></p>
<p><a class="reference external" href="https://support.f5.com/kb/en-us/products/big-ip_ltm/manuals/product/ltm-concepts-11-5-0/2.html">https://support.f5.com/kb/en-us/products/big-ip_ltm/manuals/product/ltm-concepts-11-5-0/2.html</a></p>
<p><strong>Host Virtual Server</strong></p>
<p>A host virtual server represents a specific site, such as an Internet
web site or an FTP site, and it load balances traffic targeted to
content servers that are members of a pool.</p>
<p>The IP address that you assign to a host virtual server should match the
IP address that Domain Name System (DNS) associates with the site’s
domain name. When the BIG-IP system receives a connection request for
that site, Local Traffic Manager recognizes that the client’s
destination IP address matches the IP address of the virtual server, and
subsequently forwards the client request to one of the content servers
that the virtual server load balances.</p>
<p><strong>Network Virtual Server</strong></p>
<p>A network virtual server is a virtual server whose IP address has no
bits set in the host portion of the IP address (that is, the host
portion of its IP address is 0). There are two kinds of network virtual
servers: those that direct client traffic based on a range of
destination IP addresses, and those that direct client traffic based on
specific destination IP addresses that the BIG-IP system does not
recognize.</p>
<p>When you have a range of destination IP addresses</p>
<p>With an IP address whose host bit is set to 0, a virtual server can
direct client connections that are destined for an entire range of IP
addresses, rather than for a single destination IP address (as is the
case for a host virtual server). Thus, when any client connection
targets a destination IP address that is in the network specified by the
virtual server IP address, Local Traffic Manager (LTM) can direct that
connection to one or more pools associated with the network virtual
server.</p>
<p>For example, the virtual server can direct client traffic that is
destined for any of the nodes on the 192.168.1.0 network to a specific
load balancing pool such as ingress-firewalls. Or, a virtual server
could direct a web connection destined to any address within the subnet
192.168.1.0/24, to the pool default_webservers.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<iframe width="560" height="315" src="https://www.youtube.com/embed/3uDzuRZ47FA?rel=0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe><div class="line-block">
<div class="line"><br /></div>
</div>
<hr class="docutils" />
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="objective-1-03-given-a-set-of-ltm-device-statistics-determine-which-objects-to-remove-or-consolidate-to-simplify-the-ltm-configuration">
<h2>Objective - 1.03 - Given a set of LTM device statistics, determine which objects to remove or consolidate to simplify the LTM configuration<a class="headerlink" href="#objective-1-03-given-a-set-of-ltm-device-statistics-determine-which-objects-to-remove-or-consolidate-to-simplify-the-ltm-configuration" title="Permalink to this headline">¶</a></h2>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
<p><strong>1.03 - Identify redundant and/or unused objects</strong></p>
<p><a class="reference external" href="https://support.f5.com/csp/article/K15335">https://support.f5.com/csp/article/K15335</a></p>
<p><strong>Orphaned Configuration Objects</strong></p>
<p>Over the course of a system’s operation, various configuration objects
may become orphaned as they are created and then abandoned to
accommodate changing business or application needs.</p>
<p>While orphaned configuration objects do not initially cause problems, if
allowed to accumulate, you can eventually encounter some of the
following issues:</p>
<ul>
<li><p class="first">Performance degradation when saving or loading the configuration.</p>
</li>
<li><p class="first">Increased memory and CPU utilization from monitoring unused pools and
pool members.</p>
<p>Note: CPU utilization is increased when monitors repeatedly mark pool
members or nodes down.</p>
</li>
<li><p class="first">Hindered administration from unnecessarily large configurations that
can result in configuration conflicts such as IP address or object
name conflicts.</p>
</li>
</ul>
<hr class="docutils" />
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>1.03 - Identify unnecessary monitoring</strong></p>
<p><a class="reference external" href="https://support.f5.com/kb/en-us/products/big-ip_ltm/manuals/product/ltm-monitors-reference-11-5-0/1.html">https://support.f5.com/kb/en-us/products/big-ip_ltm/manuals/product/ltm-monitors-reference-11-5-0/1.html</a></p>
<p><strong>Simple Monitoring</strong></p>
<p>Simple monitoring determines whether the status of a resource is up or
down. The system contains three simple monitors, Gateway ICMP, ICMP, and
TCP_ECHO.</p>
<p>Simple monitors work well when you only need to determine the up or down
status of the following:</p>
<ul class="simple">
<li>A Local Traffic Manager node</li>
<li>A Global Traffic Manager or Link Controller server, virtual server,
pool, pool member, or link</li>
</ul>
<p><strong>Active Monitoring</strong></p>
<p>Active monitoring checks the status of a pool member or node on an
ongoing basis as specified. If a pool member or node does not respond
within a specified timeout period, or the status of a node indicates
that performance is degraded, the BIG-IP system can redirect the traffic
to another pool member or node. There are many active monitors. Each
active monitor checks the status of a particular protocol, service, or
application. For example, one active monitor is HTTP. An HTTP monitor
allows you to monitor the availability of the HTTP service on a pool,
pool member, or node. A WMI monitor allows you to monitor the
performance of a node that is running the Windows Management
Instrumentation (WMI) software. Active monitors fall into two
categories: Extended Content Verification (ECV) monitors for content
checks, and Extended Application Verification (EAV) monitors for service
checks, path checks, and application checks.</p>
<p>An active monitor can check for specific responses and run with or
without client traffic.</p>
<p>Note: An active monitor also creates additional network traffic beyond
the client request and server response and can be slow to mark a pool
member as down.</p>
<p><strong>Passive monitoring</strong></p>
<p>Passive monitoring occurs as part of a client request. This kind of
monitoring checks the health of a pool member based on a specified
number of connection attempts or data request attempts that occur within
a specified time period. If, after the specified number of attempts
within the defined interval, the system cannot connect to the server or
receive a response, or if the system receives a bad response, the system
marks the pool member as down. There is only one passive monitor, called
an Inband monitor.</p>
<p>A passive monitor creates no additional network traffic beyond the
client request and server response. It can mark a pool member as down
quickly, as long as there is some amount of network traffic.</p>
<p>Note: A passive monitor cannot check for specific responses and can
potentially be slow to mark a pool member as up.</p>
<p><strong>Unnecessary Monitoring</strong></p>
<p>Monitors can be layered (meaning more than one monitor on a
configuration object) and assigned to different configuration objects
that makeup or represent an application. If you are checking the state
of a web application with an HTTP monitor on the Pool member and it is
working, it may be redundant to check the node with ICMP. It is logical
that if you can get a response back from the server at the application
level you don’t need to ping the server that is sending you the HTTP
response to know if it is up.</p>
<p>Example: If there is an HTTP monitor assigned to the Pool Member and it
is working, then assigning a TCP monitor checking port 80 on that Pool
Member is redundant.</p>
<hr class="docutils" />
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>1.03 - Interpret configuration and performance statistics</strong></p>
<p><strong>Interpreting configuration and performance statistics</strong></p>
<p>It can be difficult when looking for configuration objects that are no
longer used in a BIG-IP configuration. One way to confirm if a
configuration object is actively being used is to look in the network
map and see all of the object on the map and where they are assigned.</p>
<img alt="../../_images/p01.png" src="../../_images/p01.png" />
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>You can also look in Statistics/Module Statistics/Local Traffic and look
at the objects in the lists to see if they are actively receiving
traffic.</p>
<img alt="../../_images/p02.png" src="../../_images/p02.png" />
<hr class="docutils" />
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>1.03 - Explain the effect of removing functions from the LTM device configuration</strong></p>
<p><a class="reference external" href="https://support.f5.com/csp/article/K15335">https://support.f5.com/csp/article/K15335</a></p>
<p><strong>Configuration removal</strong></p>
<p>F5 recommends that you periodically audit your configuration for any
orphaned objects that can be removed from the configuration.</p>
<p>Impact of recommendation: You should not delete any objects until a
thorough configuration review is performed to ensure the configuration
object to be deleted is not referenced by another configuration object.
Additionally, you should save a backup of your configuration before
deleting any objects.</p>
<p>For example, you should review your configuration for any orphaned
configuration objects similar to the following:</p>
<ul class="simple">
<li>Virtual server that has no pools, httpclass, policy, or iRules
attached to it, and is not a Reject or Forwarding type (Layer 2 or
IP), or referenced by an iRule.</li>
<li>Custom policy that is not attached to any virtual server or
referenced by any iRule. (11.4.0 and later)</li>
<li>Custom httpclass that is not attached to any virtual server or
referenced by any iRule. (11.0.0 - 11.3.0)</li>
<li>Custom profile that is not attached to any virtual server.</li>
<li>Custom iRule that is not attached to any virtual server.</li>
<li>Pool that is not attached to any virtual server, route, httpclass,
policy, or referenced by any iRule.</li>
<li>Node that is not a member of any pool, not attached to any policy,
and is not referenced by any iRule.</li>
<li>Custom monitor that is not attached to any pool or node, and is not
the Node Default Monitor.</li>
</ul>
<p>You can use the BIG-IP iHealth website to monitor the health and proper
operation of your BIG-IP system. Additionally, BIG-IP iHealth can
discover and report a number of orphaned objects. After uploading your
qkview file, click Config Explorer on the left of the iHealth page and
search for the Unassigned Objects entry. The number of orphaned objects
will be listed and can be viewed by clicking the down arrow on the far
right.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<iframe width="560" height="315" src="https://www.youtube.com/embed/3uDzuRZ47FA?rel=0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe><div class="line-block">
<div class="line"><br /></div>
</div>
<hr class="docutils" />
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="objective-1-04-given-a-scenario-determine-the-appropriate-upgrade-and-recovery-steps-required-to-restore-functionality-to-ltm-devices">
<h2>Objective - 1.04 - Given a scenario, determine the appropriate upgrade and recovery steps required to restore functionality to LTM devices<a class="headerlink" href="#objective-1-04-given-a-scenario-determine-the-appropriate-upgrade-and-recovery-steps-required-to-restore-functionality-to-ltm-devices" title="Permalink to this headline">¶</a></h2>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
<p><strong>1.04 - Identify the appropriate methods for a clean install</strong></p>
<p><a class="reference external" href="https://support.f5.com/csp/article/K13117">https://support.f5.com/csp/article/K13117</a></p>
<p><strong>Clean Install</strong></p>
<p>On rare occasions, you may be required to perform a clean installation
of BIG-IP 11.x through 14.x. During a clean installation, you wipe all
mass-storage devices, thereby restoring the BIG-IP or Enterprise Manager
system to its factory defaults.</p>
<p>If your device is no longer able to boot from any of the defined boot
locations, you need to perform the clean installation using one of the
following methods.</p>
<ul class="simple">
<li>Install the software using an installation image saved on the system</li>
<li>Install the software using a USB DVD or USB thumb drive</li>
<li>Install the software using a PXE server</li>
</ul>
<hr class="docutils" />
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>1.04 - Identify the TMSH sys software install options required to install a new version</strong></p>
<p><a class="reference external" href="https://support.f5.com/kb/en-us/products/big-ip_ltm/manuals/product/bigip-tmsh-11-5-0.html">https://support.f5.com/kb/en-us/products/big-ip_ltm/manuals/product/bigip-tmsh-11-5-0.html</a></p>
<p><strong>sys software module</strong></p>
<p>You can use the image component to install images onto a volume, view
information about available images, or delete unwanted images.</p>
<p>Before you begin installing an image, you must download the image file
into the /shared/images directory. You can find new software images at
<a class="reference external" href="http://downloads.f5.com">http://downloads.f5.com</a>. We recommend downloading both the .iso file and
the .md5 file. Download the file (or files) to your local machine, then
transfer it to the /shared/images directory on the BIG-IP. Use the
Manager (GUI) interface to make this transfer, or quit tmsh to the Unix
command line and use scp or a similar Unix command.</p>
<p>If you downloaded the .md5 file, you can use the Unix md5sum command to
check the MD5 hash of the .iso file, and you can compare it to the
contents of the .md5 file. They should match. If they do not, retry the
download and/or transfer of the .iso file.</p>
<p>From tmsh, you can use show sys software status to see all of the
available disk volumes where you can install the .iso file. You can
install the .iso file in any volume that is not active.</p>
<p>Then use the install command with this component to install the .iso
file to an unused volume. You can use the create-volume option if you
want to create a new volume. The installation takes some time; you can
use show sys software status repetitively to watch the progress of the
installation. To put the .iso file into active service, use the reboot
option in the install command, or use the reboot volume vol-name command
after the install command completes.</p>
<p>Confirming an Image Installation</p>
<p>You can use show sys version to confirm that the system is running the
new software version. If this is a new module for the current system,
you may need to use show sys license and/or install sys license to
update your license. For a new module, you may also need to provision
CPU, memory, and disk space for the module with the sys provision
component.</p>
<p>Examples:</p>
<p>install image BIGIP-10.0.0.5376.0.iso volume HD1.1 reboot</p>
<p>Attempts to install the specified image, BIGIP-10.0.0.5376.0.iso, onto
HD1.1. Note: If the installation is successful, the machine reboots into
the newly installed image.</p>
<p>list image BIGIP-10.0.0.5376.0.iso</p>
<p>Displays information about the specified image, build 5376.0 of BIG-IP
version 10.0.0.</p>
<p>list image */1</p>
<p>Displays information about all of the images located on the first slot.</p>
<p>Command Options:</p>
<ul class="simple">
<li>build</li>
</ul>
<p>Displays the build number of the image.</p>
<ul class="simple">
<li>build-date</li>
</ul>
<p>Displays the date on which the image was built.</p>
<ul class="simple">
<li>checksum</li>
</ul>
<p>Displays the checksum of the image. You can use this option to verify the integrity of the image.</p>
<ul class="simple">
<li>create-volume</li>
</ul>
<p>Creates a new volume using the name specified with the volume option. Mirrored volume names must begin with the prefix MD1.. Mirrored volumes are available only on systems that support RAID, see sys raid.</p>
<ul class="simple">
<li>file-size</li>
</ul>
<p>Displays the size of the image file in megabytes.</p>
<ul class="simple">
<li>glob</li>
</ul>
<p>Displays the items that match the glob expression. See help glob for a description of glob expression syntax.</p>
<ul class="simple">
<li>last-modified</li>
</ul>
<p>Displays the date the file was last modified.</p>
<ul class="simple">
<li>name</li>
</ul>
<p>Specifies the name of the image that you want to install or delete.</p>
<ul class="simple">
<li>product</li>
</ul>
<p>Displays the F5 product the image contains.</p>
<ul class="simple">
<li>reboot</li>
</ul>
<p>Specifies that the system reboots immediately after a successful installation.</p>
<ul class="simple">
<li>regex</li>
</ul>
<p>Displays the items that match the regular expression. The regular expression must be preceded by an at sign (&#64;[regular expression]) to indicate that the identifier is a regular expression. See help regex for a description of regular expression syntax.</p>
<ul class="simple">
<li>verified</li>
</ul>
<p>When set to yes, indicates that the image is authentic.</p>
<ul class="simple">
<li>version</li>
</ul>
<p>Displays the version number of the product this image contains.</p>
<ul class="simple">
<li>volume</li>
</ul>
<p>Specifies the name of the volume on which you want to install the image, or from which you want to delete the image.</p>
<hr class="docutils" />
<p><a class="reference external" href="https://support.f5.com/kb/en-us/solutions/public/14000/000/sol14088.html">https://support.f5.com/kb/en-us/solutions/public/14000/000/sol14088.html</a></p>
<p><strong>Installing A Software Image</strong></p>
<p>Installing a software image, point release, or hotfix</p>
<p>Once the software image, point release, or hotfix is imported, you can
install it on a boot location. When installing to a new boot location,
the new boot location is created when performing the software
installation.</p>
<p>Note: You can install a software image over an existing software image,
provided the boot location is not active.</p>
<p>Impact of procedure: Performing the following procedure should not have
a negative impact on your system.</p>
<p>Using tmsh</p>
<ol class="arabic">
<li><p class="first">Log in to tmsh by typing the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>tmsh
</pre></div>
</div>
</li>
<li><p class="first">To install a software image, point release, or software hotfix, use
the following command syntax:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>install /sys software &lt;hotfix <span class="p">|</span> image&gt; &lt;software&gt;.iso volume &lt;volume_number&gt;
</pre></div>
</div>
<p>For example, to install BIG-IP 12.0.0 to new volume HD1.5, type the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>install /sys software image BIGIP-12.0.0.0.0.606.iso volume HD1.5 create-volume
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You can use tab completion in tmsh. To see the available
images for installation, press the Tab key after you type the
install sys software image command.</p>
</div>
</li>
<li><p class="first">To verify the software installation progress, type the following
command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>show /sys software status
</pre></div>
</div>
<p>The command output appears similar to the following example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>---------------------------------------------------

Sys::Software Status

Volume Product Version Build Active Status

---------------------------------------------------

HD1.1 BIG-IP <span class="m">10</span>.2.4 <span class="m">577</span>.0 no <span class="nb">complete</span>

HD1.2 BIG-IP <span class="m">11</span>.5.2 <span class="m">0</span>.0.141 no <span class="nb">complete</span>

HD1.3 BIG-IP <span class="m">11</span>.5.3 <span class="m">0</span>.0.163 no <span class="nb">complete</span>

HD1.4 BIG-IP <span class="m">12</span>.0.0 <span class="m">0</span>.0.606 yes <span class="nb">complete</span>

HD1.5 BIG-IP <span class="m">12</span>.0.0 <span class="m">0</span>.0.606 no installing <span class="m">10</span>.000 pct
</pre></div>
</div>
</li>
</ol>
<hr class="docutils" />
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>1.04 - Identify the steps required to upgrade the LTM device such as:
license renewal, validation of upgrade path, review release notes,
etc.</strong></p>
<p><a class="reference external" href="https://support.f5.com/csp/article/K84554955#prepare">https://support.f5.com/csp/article/K84554955#prepare</a></p>
<p><strong>Upgrade</strong></p>
<p>Preparing for a software upgrade</p>
<p>Before you perform your software upgrade, F5 recommends that you make
the following preparations:</p>
<ul>
<li><p class="first">When you have planned the date for the upgrade, you have the option
to open a proactive service request to reduce the time needed to
speak with a Support Engineer, should you encounter any technical
issues during the upgrade procedure. For more information, refer to
K16022: Opening a proactive service request with F5 Technical
Support.</p>
<p>Note: If you want F5 to provide full planning assistance during your
upgrade, you can contact Professional Services. F5 Technical Support
will answer specific questions regarding your upgrade but cannot
provide start-to-finish upgrade assistance. For more information,
refer to Scope of Support.</p>
</li>
<li><p class="first">Confirm your running BIG-IP software version using the TMOS Shell
(tmsh) show /sys software status command. Note the Volume name in
case you decide to boot a previous version at a later time (HD1.1 in
the below example).</p>
<p>For example, the command and output on a system running BIG-IP
12.1.2 appears similar to the following example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>tmsh show /sys software status
Sys::Software Status

Volume Product Version Build Active Status
HD1.1 BIG-IP <span class="m">12</span>.1.2 <span class="m">0</span>.0.249 yes <span class="nb">complete</span>
</pre></div>
</div>
</li>
<li><p class="first">For BIG-IP 10.x systems, confirm that you are using the volume’s
disk-formatting scheme. For more information, refer to the following
two articles:</p>
<ul class="simple">
<li><a class="reference external" href="https://support.f5.com/csp/article/K10817">K10817: Determining the disk-formatting scheme used by a BIG-IP
version 10.x system</a></li>
<li><a class="reference external" href="https://support.f5.com/csp/article/K15459">K15459: BIG-IP systems that use partition disk style cannot be
upgraded to versions 11.0.0 or
later</a></li>
</ul>
</li>
<li><p class="first">Check the integrity of the running configuration. For BIG-IP 11.x and
later use the tmsh load /sys config verify command. For BIG-IP 10.x
and earlier, use bigpipe verify load. The system should not return
any errors.</p>
<p>Note: Warnings may not hinder a software upgrade but if possible,
you should correct them before you proceed with the upgrade.</p>
</li>
<li><p class="first">Reactivate the system license. For more information, refer to <a class="reference external" href="https://support.f5.com/csp/article/K7727">K7727:
License activation may be required prior to a software upgrade for
the BIG-IP or Enterprise Manager
system</a>.</p>
</li>
<li><p class="first">Verify that the BIG-IP device certificate has not expired. For more
information, refer to <a class="reference external" href="https://support.f5.com/csp/article/K6353">K6353: Updating an SSL device certificate on a
BIG-IP system</a>.</p>
</li>
<li><p class="first">For high availability (HA) BIG-IP systems, verify that all systems in
the device group are in sync. For more information, refer to <a class="reference external" href="https://support.f5.com/csp/article/K13920">K13920:
Performing a ConfigSync using the Configuration
utility</a>.</p>
</li>
<li><p class="first">Note your local admin and root user passwords in case you need them
for troubleshooting.</p>
</li>
<li><p class="first">Generate a qkview diagnostics file and upload to BIG-IP iHealth to
look for any triggered upgrade-related heuristics in the Diagnostics
and Upgrade Advisor tabs. For more information about:</p>
<ul class="simple">
<li>Qkview diagnostics, refer to <a class="reference external" href="https://support.f5.com/csp/article/K12878">K12878: Generating diagnostic data
using the qkview
utility</a>.</li>
<li>BIG-IP iHealth, refer to the <a class="reference external" href="https://support.f5.com/kb/en-us/products/big-ip_ltm/manuals/related/bigip_ihealth_user_guide.html">BIG-IP iHealth User
Guide</a>.</li>
</ul>
</li>
<li><p class="first">Create a user configuration set (UCS) archive of the BIG-IP
configuration and save it to a secure remote location in case it is
needed for recovery purposes. Retain a UCS archive from every BIG-IP
system in your network on a remote file store to aid disaster
recovery. Even if the archive has aged and does not contain all
configuration objects, it will provide faster recovery time than if
you completely reconfigure the BIG-IP system. For more archive
information, refer to the following articles:</p>
</li>
<li><p class="first"><a class="reference external" href="https://support.f5.com/csp/article/K4423">K4423: Overview of UCS archives</a></p>
</li>
<li><p class="first"><a class="reference external" href="https://support.f5.com/csp/article/K12880">K2880: Configuring a replacement BIG-IP device after a Return Materials Authorization</a></p>
</li>
<li><p class="first"><a class="reference external" href="https://support.f5.com/csp/article/K13551">K13551: Configuring a replacement BIG-IP device after an RMA when no UCS archive is available</a></p>
</li>
<li><p class="first">Beginning in 11.6.3, 12.1.3, and 13.1.0, BIG-IP software no longer
uses cumulative hotfixes. Product defects and security fixes are now
included in a full release referred to as a point release. Point
releases are identified by a fourth version element. If you intend to
install these BIG-IP versions or later versions, you should download
the point release that you plan to install from the F5
<a class="reference external" href="https://downloads.f5.com/">Downloads</a> site. If you intend to
install versions that support hotfixes, you should download the base
BIG-IP version that you plan to install from the F5
<a class="reference external" href="https://downloads.f5.com/">Downloads</a> site, including the latest
hotfix, if available. For more information, refer to <a class="reference external" href="https://support.f5.com/csp/article/K167">K167: Downloading software and firmware from F5</a>.</p>
</li>
<li><p class="first">Verify the integrity of the downloaded software images using the MD5
checksum utility. For more information, refer to <a class="reference external" href="https://support.f5.com/csp/article/K8337">K8337: Verifying the MD5 checksum for the downloaded F5 software file</a>.</p>
</li>
</ul>
<hr class="docutils" />
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>1.04 - Identify how to copy a config to a previously installed boot location or slot</strong></p>
<p><a class="reference external" href="https://support.f5.com/csp/article/K14724">https://support.f5.com/csp/article/K14724</a></p>
<p><strong>Copying config to different boot location</strong></p>
<p>The cpcfg command allows you to copy a configuration from a specified
source boot location to another specified target boot location. The
cpcfg command uses the following syntax:</p>
<p>cpcfg &lt;options&gt; &lt;destination_location&gt;</p>
<p>You can use the options in the following table to add functionality to
the cpcfg command.</p>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="78%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Option syntax</strong></th>
<th class="head"><strong>Function</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>–source = SLOT</td>
<td>Get configuration from specified slot (for example: HD1.1)</td>
</tr>
<tr class="row-odd"><td>–verbose</td>
<td>Increase verbose level (cumulative)</td>
</tr>
<tr class="row-even"><td>–reboot</td>
<td>Immediately switch to target location after transferring configuration</td>
</tr>
</tbody>
</table>
<p>Note: The —reboot option is available only in BIG-IP 10.2.4 and BIG-IP 11.2.0 and later.</p>
<p>The cpcfg command has the following restrictions:</p>
<ul>
<li><p class="first">The BIG-IP version of the target boot location must be the same or
later than the version of the source boot location.</p>
<p>If the specified target boot location is an earlier version than the
source boot location, the command fails with an error message
similar to the following example:</p>
<p>info: New version (11.4.0) is not &gt;= originating version (11.4.1);
configuration is not compatible.</p>
<p>configuration roll-forward desired but not compatible.</p>
</li>
<li><p class="first">You cannot specify the currently-active boot location as the target
boot location.</p>
<p>If the specified target boot location is the active boot location,
the command fails with an error message similar to the following
example:</p>
<p>Copy to active location (HD1.6) is not supported.</p>
</li>
<li><p class="first">On VIPRION systems, you must run the cpcfg command with the cluster
shell (clsh) command on the primary blade.</p>
</li>
<li><p class="first">If you omit the –source=SLOT option from the command, the system
uses the currently active boot location as the source configuration.</p>
</li>
</ul>
<p>Prerequisites</p>
<p>You must meet the following prerequisites to use these procedures:</p>
<ul class="simple">
<li>You must have command line access on the BIG-IP system.</li>
<li>The BIG-IP system must have multiple boot locations (volumes).</li>
</ul>
<p>Procedures</p>
<p>Copying a configuration from one boot location to another</p>
<p>You can use the cpcfg command to copy the configuration from one boot
location to another boot location. To do so, perform the following
procedure:</p>
<p>Impact of procedure: The system overwrites the configuration on the
specified target boot location with the configuration of the specified
source boot location.</p>
<ol class="arabic">
<li><p class="first">Log in to the BIG-IP command line.</p>
</li>
<li><p class="first">Display the available boot locations by typing the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>tmsh show sys software
</pre></div>
</div>
<p>The command output appears similar to the following example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>--------------------------------------------------

Sys::Software Status

Volume Product Version Build Active Status

--------------------------------------------------

HD1.1 BIG-IP <span class="m">10</span>.2.4 <span class="m">577</span>.0 no <span class="nb">complete</span>

HD1.2 BIG-IP <span class="m">11</span>.3.0 <span class="m">2806</span>.0 yes <span class="nb">complete</span>

HD1.3 BIG-IP <span class="m">11</span>.4.0 <span class="m">2384</span>.0 no <span class="nb">complete</span>
</pre></div>
</div>
</li>
<li><p class="first">Copy the configuration from the source boot location to the target
boot location using the following command syntax:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cpcfg --source<span class="o">=</span>SLOT &lt;destination_location&gt;
</pre></div>
</div>
<p>For example, to copy the configuration from boot location HD1.2 (11.3.0) to boot location HD1.3 (11.4.0) you would type the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cpcfg --source<span class="o">=</span>HD1.2 HD1.3
</pre></div>
</div>
<p>On a VIPRION system, ensure that each blade receives the updated configuration by running the cpcfg command with the cluster shell (clsh) utility on the primary blade.</p>
<p>For example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>clsh cpcfg --source<span class="o">=</span>HD1.2 HD1.3
</pre></div>
</div>
</li>
</ol>
<hr class="docutils" />
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>1.04 - Identify valid rollback steps for a given upgrade scenario</strong></p>
<p><strong>Rollback installation</strong></p>
<p>The upgrade process will only install the new version of software to a
new volume and then copy the config forward from the current running
boot location. Since Big-IP forces you to install to a software volume
which is not currently in-use, you are able to boot back to the original
volume should there be a problem.</p>
<p><a class="reference external" href="https://support.f5.com/csp/article/K84554955#backout">https://support.f5.com/csp/article/K84554955#backout</a></p>
<p>Backing out your software upgrade</p>
<p>If a BIG-IP system fails to upgrade and you cannot perform further
troubleshooting due to time constraints, complete the following steps
before reverting to the previous BIG-IP version.</p>
<p>Note: If you do not perform troubleshooting before reverting changes, it
may be difficult to determine a root cause for failure. If possible,
contact F5 Technical Support while the issue is occurring so you can
perform relevant data gathering, such as creating a fresh qkview file.</p>
<p>Gathering troubleshooting information</p>
<ol class="arabic simple">
<li>To determine what may be causing the configuration load error, run
the tmsh load /sys config command.</li>
<li>Create a qkview file.</li>
</ol>
<p>Using the Configuration utility to reboot</p>
<ol class="arabic simple">
<li>Log in to the Configuration utility with administrative privileges.</li>
<li>Navigate to System &gt; Software Management &gt; Boot Locations.</li>
<li>Click the Boot Location for the previous software version.</li>
<li>Click Activate.</li>
<li>To close the confirmation message, click OK.</li>
</ol>
<p>Rebooting from the command line</p>
<ol class="arabic">
<li><p class="first">Log in to the command line.</p>
</li>
<li><p class="first">To reboot to the previous software version, use the following command syntax:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>tmsh reboot volume &lt;volume name&gt;
</pre></div>
</div>
<p>For example, to reboot to volume HD1.1, type the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>tmsh reboot volume HD1.1
</pre></div>
</div>
<p>note:: The previously described backout procedures do not apply if you
have already reset the BIG-IP system to its default settings.</p>
</li>
</ol>
<div class="line-block">
<div class="line"><br /></div>
</div>
<iframe width="560" height="315" src="https://www.youtube.com/embed/3uDzuRZ47FA?rel=0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe><div class="line-block">
<div class="line"><br /></div>
</div>
<hr class="docutils" />
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="objective-1-05-given-a-scenario-determine-the-appropriate-upgrade-steps-required-to-minimize-application-outages">
<h2>Objective - 1.05 - Given a scenario, determine the appropriate upgrade steps required to minimize application outages<a class="headerlink" href="#objective-1-05-given-a-scenario-determine-the-appropriate-upgrade-steps-required-to-minimize-application-outages" title="Permalink to this headline">¶</a></h2>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
<p><strong>1.05 - Explain how to upgrade an LTM device from the GUI</strong></p>
<p><a class="reference external" href="https://support.f5.com/csp/article/K84554955#upgrade">https://support.f5.com/csp/article/K84554955#upgrade</a></p>
<p><strong>Performing a software upgrade on a BIG-IP system</strong></p>
<p>Impact of procedure: You can upgrade the active BIG-IP system in an HA
configuration before you reboot into the new software volume. However,
if the BIG-IP system serves high volume traffic, you can perform the
upgrade during a maintenance window to lessen the impact on a busy
system. Optionally, you can perform the upgrade on the standby systems
in an HA configuration before the maintenance window to shorten the
required duration of the maintenance window.</p>
<p>Note: Ensure that your system is already booted into the software volume
that contains the configuration you are planning to upgrade. If the
system is not already booted into that volume, reboot your system to
that software volume before you begin the following procedure.</p>
<ol class="arabic">
<li><p class="first">Log in to the Configuration utility with administrative privileges.</p>
</li>
<li><p class="first">To upload the necessary ISO files, navigate to System &gt; Software Management.</p>
</li>
<li><p class="first">Click Import.</p>
</li>
<li><p class="first">Click Browse to select the file to upload from your local computer.</p>
</li>
<li><p class="first">Click Import.</p>
<p>Notes:</p>
<ul class="simple">
<li>Alternatively, you can use the Secure Copy (SCP) protocol from a
remote device to transfer images to the /shared/images/ directory on
the BIG-IP. For more information, refer to K175: Transferring files
to or from an F5 system.</li>
<li>Images automatically appear in the Configuration utility when the
system completes the upload and verifies the internal checksum.</li>
</ul>
</li>
<li><p class="first">If you are installing a point release, navigate to System &gt; Software
Management &gt; Image list. If you are installing a hotfix, navigate to
System &gt; Software Management &gt; Hotfix list.</p>
<p>Note: The BIG-IP system automatically installs the base image before
installing the hotfix to the new software volume.</p>
</li>
<li><p class="first">Select the box next to the point release image or the hotfix image you want to install.</p>
</li>
<li><p class="first">Click Install.</p>
</li>
<li><p class="first">Select an available disk from the Select Disk menu.</p>
</li>
<li><p class="first">Select an empty volume set from the Volume Set Name menu, or type a new volume set name.</p>
<p>Note: You can use any combination of lowercase alphanumeric
characters (a-z, 0-9) and the hyphen character. The volume set name
can be from 1 to 32 characters in length but cannot be only one 0
(zero) character (for example HD1.0 or MD1.0). For instance, if the
HD1 disk is active and you type Development into Volume set name,
the system creates a volume set named HD1.Development and installs
the specified software to the new volume set.</p>
</li>
<li><p class="first">Click Install.</p>
<p>Note: If the string you type does not match an existing volume set,
the system creates the volume set and installs the software.</p>
<p>To see the installation progress, view the Install Status column of
the Installed Images section of the page.</p>
</li>
</ol>
<hr class="docutils" />
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>1.05 - Describe the effect of performing an upgrade in an environment with device groups and traffic groups</strong></p>
<p><a class="reference external" href="https://support.f5.com/kb/en-us/products/big-ip_ltm/manuals/product/bigip-11x-software-upgrade-11-5-0/1.html">https://support.f5.com/kb/en-us/products/big-ip_ltm/manuals/product/bigip-11x-software-upgrade-11-5-0/1.html</a></p>
<p><strong>Upgrade of device groups and traffic groups</strong></p>
<p>Preparing BIG-IP device groups for an upgrade</p>
<p>The following prerequisites apply when you upgrade BIG-IP device groups
from version 11.x to the new version.</p>
<ul class="simple">
<li>The BIG-IP systems (Device A, Device B, and Device C) are configured
as a device group.</li>
<li>Each BIG-IP device is running the same version of 11.x software.</li>
<li>The BIG-IP version 11.x devices are the same model of hardware.</li>
</ul>
<p>When you upgrade a BIG-IP device group from version 11.x to the new
version, you begin by preparing the devices.</p>
<p>Note: If you prefer to closely observe the upgrade of each device, you
can optionally connect to the serial console port of the device that you
are upgrading.</p>
<ol class="arabic simple">
<li>For each device, complete the following steps to prepare the
configuration and settings.<ul>
<li>Examine the Release Notes for specific configuration requirements,
and reconfigure the systems, as necessary.</li>
<li>Examine the Release Notes for specific changes to settings that occur
when upgrading from version 11.x to the new version, and complete any
in-process settings.</li>
</ul>
</li>
<li>From the device that is running the latest configuration, synchronize
the configuration to the devices in the device group.</li>
</ol>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Option</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>For version 11.3, and later.</td>
<td><ol class="first last loweralpha simple">
<li>On the Main menu, click&nbsp; <strong>Device Management</strong>&nbsp;&gt;&nbsp;<strong>Overview</strong>. A message appears for the Status Message.</li>
<li>In the Devices area of the screen, in the Sync Status column, click the device that shows a sync status of&nbsp;Changes Pending.</li>
<li>Click&nbsp; <strong>Synchronize Device to Group</strong>.</li>
</ol>
</td>
</tr>
</tbody>
</table>
<ol class="arabic" start="3">
<li><p class="first">For each device, create a QKView file, and upload it to iHealth.</p>
<ul class="simple">
<li>On the Main menu, click System &gt; Support. The Support screen opens.</li>
<li>Select the QKView check box.</li>
<li>Click Start. The BIG-IP system creates a QKView file.</li>
<li>Click Download Snapshot File, and click Save. The BIG-IP system
downloads the QKView file, named
case_number_###_support_file.qkview, into the browser’s download
folder.</li>
<li>Rename the QKView file to include a case number and an identifier. An
example of a renamed file is: c123456_A_support_file.qkview.</li>
<li>Go to <a class="reference external" href="https://ihealth.f5.com">https://ihealth.f5.com</a>, and log in using your F5 WebSupport
credentials.</li>
<li>Click Upload.</li>
<li>Click Browse, navigate to the QKView file in the download folder, and
then click Open.</li>
<li>Click Upload QKView(s).</li>
</ul>
</li>
<li><p class="first">For each device, create a backup file.</p>
<ul class="simple">
<li>Access the tmsh command line utility.</li>
<li>At the prompt, type save /sys ucs /shared/filename.ucs.</li>
<li>Copy the backup file to a safe location on your network.</li>
</ul>
<p>Note: For additional support information about backing up and
restoring BIG-IP system configuration files, refer to SOL11318 on
www.askf5.com.</p>
</li>
<li><p class="first">Download either the latest BIG-IP system hotfix image file, if
available, or the new version software image file from the AskF5
downloads web site (<a class="reference external" href="http://support.f5.com/kb/en-us.htm">http://support.f5.com/kb/en-us.htm</a>) to a
preferred location.</p>
<p>Note: Using a tool or utility that computes an md5 checksum, you can
verify the integrity of the BIG-IP system latest hotfix .iso file or
new version .iso file in the preferred location.</p>
</li>
<li><p class="first">Import either the latest BIG-IP system hotfix image file, if
available, or the new version software image file to each device.</p>
</li>
</ol>
<table border="1" class="docutils">
<colgroup>
<col width="26%" />
<col width="74%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Option</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Import the latest BIG-IP system hotfix image file</td>
<td><ol class="first last loweralpha simple">
<li>On the Main menu, click System &gt; Software Management &gt; Hotfix List &gt; Import.</li>
<li>Click Browse, locate and click the image file, click Open, and click Import.</li>
<li>When the hotfix image file completes uploading to the BIG-IP device, click OK. A link to the image file appears in the Software Image list.</li>
</ol>
</td>
</tr>
<tr class="row-odd"><td>Import the new version software image file</td>
<td><ol class="first last loweralpha simple">
<li>On the Main menu, click System &gt; Software Management &gt; Image List &gt; Import.</li>
<li>Click Browse, locate and click the image file, click Open, and click Import.</li>
<li>When the software image file completes uploading to the BIG-IP device, click OK. A link to the image file appears in the Software Image list.</li>
</ol>
</td>
</tr>
</tbody>
</table>
<ol class="arabic" start="7">
<li><p class="first">If the BIG-IP system is configured to use a network hardware security
module (HSM), the HSM client software must be available for
reinstallation.</p>
<p>Important: Make sure that the available version of HSM client
software supports the new version of BIG-IP software.</p>
</li>
</ol>
<p>The BIG-IP devices are prepared to install the latest hotfix or new
version software.</p>
<p><strong>Upgrading the Device A system</strong></p>
<p>The following prerequisites apply for this task.</p>
<ul class="simple">
<li>Each device must be prepared to upgrade Device A with the new version
software.</li>
<li>Either the latest hotfix image file, if available, or the new version
software image file is downloaded and accessible.</li>
</ul>
<p>After you prepare each device for upgrading the software, you force the
device offline, reactivate the software license, and install the new
version software onto Device A.</p>
<ol class="arabic">
<li><p class="first">Force Device A to offline state.</p>
<ul class="simple">
<li>On the Main menu, click Device Management &gt; Devices.</li>
<li>Click the name of Device A. The device properties screen opens.</li>
<li>Click Force Offline. Device A changes to offline state.</li>
</ul>
<p>Important: Once Device A changes to offline state, ensure that
traffic passes normally for all active traffic groups on the other
devices.</p>
<p>Note: When Force Offline is enabled, make sure to manage the system
using the management port or console. Connections to self IP
addresses are terminated when Force Offline is enabled.</p>
</li>
<li><p class="first">Reactivate the software license.</p>
<ul class="simple">
<li>On the Main menu, click System &gt; License.</li>
<li>Click Re-activate.</li>
<li>For the Activation Method setting, select the Automatic (requires
outbound connectivity) option.</li>
<li>Click Next. The BIG-IP software license renews automatically.</li>
<li>Click Continue.</li>
</ul>
</li>
<li><p class="first">Install either the latest hotfix image, if available, or the new
version software.</p>
</li>
</ol>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="87%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Option</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Install the latest hotfix image</td>
<td><ol class="first last loweralpha">
<li><p class="first">On the Main menu, click System &gt; Software Management &gt; Hotfix List.</p>
</li>
<li><p class="first">In the Available Images area, select the check box for the hotfix image, and click Install. The Install Software Hotfix popup screen opens.</p>
</li>
<li><p class="first">From the Volume set name list, select the location of the new version software volume to install the hotfix image, and click Install.</p>
<p>Important: In the Install Status list for the specified location, a progress bar indicates the status of the installation. Ensure that installation successfully completes, as indicated by the progress bar, before proceeding.</p>
</li>
</ol>
</td>
</tr>
<tr class="row-odd"><td>Install the new version software</td>
<td><ol class="first last loweralpha">
<li><p class="first">On the Main menu, click System &gt; Software Management &gt; Image List.</p>
</li>
<li><p class="first">In the Available Images area, select the check box for the new version software image, and click Install. The Install Software Image popup screen opens.</p>
</li>
<li><p class="first">From the Volume set name list, select a location to install the image, and click Install.</p>
<p>Important: In the Install Status list for the specified location, a progress bar indicates the status of the installation. Ensure that installation successfully completes, as indicated by the progress bar, before proceeding.</p>
</li>
</ol>
</td>
</tr>
</tbody>
</table>
<ol class="arabic simple" start="4">
<li>Reboot the device to the location of the installed new software
image.</li>
</ol>
<table border="1" class="docutils">
<colgroup>
<col width="12%" />
<col width="88%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Option</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Reboot from version 11.4.0, or later</td>
<td><ol class="first last loweralpha">
<li><p class="first">On the Main menu, click System &gt; Software Management &gt; Boot Locations.</p>
</li>
<li><p class="first">In the Boot Location list, click the boot location of the installed new software image.</p>
</li>
<li><p class="first">From the Install Configuration list, select Yes. The Source Volume list appears.</p>
</li>
<li><p class="first">From the Source Volume list, select the location of the configuration to install when activating the boot location of the new software image. For example, for an installation of a new software image on HD1.3, selecting HD1.2:11.6.0 installs the version 11.6.0 configuration.</p>
</li>
<li><p class="first">Click Activate. Device A reboots to the new software image boot location in offline state.</p>
<p>Note: If the device appears to be taking a long time to reboot, do not cycle the power off and on. Instead, verify the status of the device by connecting to its serial console port. The device might be performing firmware upgrades.</p>
</li>
</ol>
</td>
</tr>
</tbody>
</table>
<ol class="arabic" start="5">
<li><p class="first">If the BIG-IP system is configured to use a network hardware security
module (HSM), reinstall and configure the HSM client software.</p>
<p>Important: You must reinstall network HSM client software on this
device before upgrading another device in the device group, to
ensure that traffic groups using the network HSM function properly.</p>
</li>
<li><p class="first">Release Device A from offline state.</p>
<ul class="simple">
<li>On the Main menu, click Device Management &gt; Devices.</li>
<li>Click the name of Device A. The device properties screen opens.</li>
<li>Click Release Offline. Device A changes to standby state.</li>
</ul>
</li>
</ol>
<p>The new version of BIG-IP software is installed on Device A, with all
traffic groups in standby state.</p>
<p><strong>Upgrading the Device B system</strong></p>
<p>The following prerequisites apply in upgrading Device B.</p>
<ul class="simple">
<li>Device B must be prepared to upgrade the software to new version
software.</li>
<li>Either the latest hotfix image file, if available, or the new version
software image file is downloaded and accessible.</li>
<li>If the BIG-IP system is configured to use a network hardware security
module (HSM), you must reinstall network HSM client software on
Device A before upgrading Device B, to ensure that traffic groups
using the network HSM function properly.</li>
<li>Device A (the new version BIG-IP device) is in standby state.</li>
</ul>
<p>After you prepare Device B for upgrading the software, you force the
device offline, reactivate the software license, and install the new
version software.</p>
<ol class="arabic">
<li><p class="first">Force Device B to offline state.</p>
<ul class="simple">
<li>On the Main menu, click Device Management &gt; Devices.</li>
<li>Click the name of Device B. The device properties screen opens.</li>
<li>Click Force Offline. Device B changes to offline state.</li>
</ul>
<p>Important: Once Device B changes to offline state, ensure that Device A
passes traffic normally for all active traffic groups.</p>
<p>Note: When Force Offline is enabled, make sure to manage the system
using the management port or console. Connections to self IP addresses
are terminated when Force Offline is enabled.</p>
</li>
<li><p class="first">Reactivate the software license.</p>
<ul class="simple">
<li>On the Main menu, click System &gt; License.</li>
<li>Click Re-activate.</li>
<li>For the Activation Method setting, select the Automatic (requires
outbound connectivity) option.</li>
<li>Click Next. The BIG-IP software license renews automatically.</li>
<li>Click Continue.</li>
</ul>
</li>
<li><p class="first">Install either the latest hotfix image, if available, or the new
version software.</p>
</li>
</ol>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="87%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Option</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Install the latest hotfix image</td>
<td><ol class="first last loweralpha">
<li><p class="first">On the Main menu, click System &gt; Software Management &gt; Hotfix List.</p>
</li>
<li><p class="first">In the Available Images area, select the check box for the hotfix image, and click Install. The Install Software Hotfix popup screen opens.</p>
</li>
<li><p class="first">From the Volume set name list, select the location of the new version software volume to install the hotfix image, and click Install.</p>
<p>Important: In the Install Status list for the specified location, a progress bar indicates the status of the installation. Ensure that installation successfully completes, as indicated by the progress bar, before proceeding.</p>
</li>
</ol>
</td>
</tr>
<tr class="row-odd"><td>Install the new version software</td>
<td><ol class="first last loweralpha">
<li><p class="first">On the Main menu, click System &gt; Software Management &gt; Image List.</p>
</li>
<li><p class="first">In the Available Images area, select the check box for the new version software image, and click Install. The Install Software Image popup screen opens.</p>
</li>
<li><p class="first">From the Volume set name list, select a location to install the image, and click Install.</p>
<p>Important: In the Install Status list for the specified location, a progress bar indicates the status of the installation. Ensure that installation successfully completes, as indicated by the progress bar, before proceeding.</p>
</li>
</ol>
</td>
</tr>
</tbody>
</table>
<ol class="arabic simple" start="4">
<li>Reboot the Device B to the location of the installed new software
image.</li>
</ol>
<table border="1" class="docutils">
<colgroup>
<col width="12%" />
<col width="88%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Option</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Reboot from version 11.4.0, or later</td>
<td><ol class="first last loweralpha">
<li><p class="first">On the Main menu, click System &gt; Software Management &gt; Boot Locations.</p>
</li>
<li><p class="first">In the Boot Location list, click the boot location of the installed new software image.</p>
</li>
<li><p class="first">From the Install Configuration list, select Yes. The Source Volume list appears.</p>
</li>
<li><p class="first">From the Source Volume list, select the location of the configuration to install when activating the boot location of the new software image. For example, for an installation of a new software image on HD1.3, selecting HD1.2:11.6.0 installs the version 11.6.0 configuration.</p>
</li>
<li><p class="first">Click Activate. Device A reboots to the new software image boot location in offline state.</p>
<p>Note: If the device appears to be taking a long time to reboot, do not cycle the power off and on. Instead, verify the status of the device by connecting to its serial console port. The device might be performing firmware upgrades.</p>
</li>
</ol>
</td>
</tr>
</tbody>
</table>
<ol class="arabic" start="5">
<li><p class="first">If the BIG-IP system is configured to use a network HSM, reinstall
and configure the HSM client software.</p>
<p>Important: You must reinstall network HSM client software on this
device before upgrading another device in the device group, to
ensure that traffic groups using the network HSM function properly.</p>
</li>
<li><p class="first">Release Device B from offline state.</p>
<ul class="simple">
<li>On the Main menu, click Device Management &gt; Devices.</li>
<li>Click the name of Device B. The device properties screen opens.</li>
<li>Click Release Offline. Device B changes to standby state.</li>
</ul>
</li>
</ol>
<p>The new version of BIG-IP software is installed on Device B with
configured traffic groups in standby state.</p>
<p><strong>Upgrading the Device C system</strong></p>
<p>The following prerequisites apply in upgrading Device C.</p>
<ul class="simple">
<li>Device C must be prepared to upgrade the software to new version
software.</li>
<li>Either the latest hotfix image file, if available, or the new version
software image file is downloaded and accessible.</li>
<li>If the BIG-IP system is configured to use a network hardware security
module (HSM), you must reinstall network HSM client software on
Device B before upgrading Device C, to ensure that traffic groups
using the network HSM function properly.</li>
<li>Device C is in active state.</li>
</ul>
<p>After you prepare Device C for upgrading the software, you force the
device offline, reactivate the software license, and install the new
version software.</p>
<ol class="arabic">
<li><p class="first">Force Device C to offline state.</p>
<ul class="simple">
<li>On the Main menu, click Device Management &gt; Devices.</li>
<li>Click the name of Device C. The device properties screen opens.</li>
<li>Click Force Offline. Device C changes to offline state.</li>
</ul>
<p>Important: Once Device C changes to offline state, ensure that the
other devices pass traffic normally for all active traffic group</p>
<p>Note: When Force Offline is enabled, make sure to manage the system
using the management port or console. Connections to self IP
addresses are terminated when Force Offline is enabled.</p>
</li>
<li><p class="first">Reactivate the software license.</p>
<ul class="simple">
<li>On the Main menu, click System &gt; License.</li>
<li>Click Re-activate.</li>
<li>For the Activation Method setting, select the Automatic (requires
outbound connectivity) option.</li>
<li>Click Next. The BIG-IP software license renews automatically.</li>
<li>Click Continue.</li>
</ul>
</li>
<li><p class="first">Install either the latest hotfix image, if available, or the new
version software.</p>
</li>
</ol>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="87%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Option</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Install the latest hotfix image</td>
<td><ol class="first last loweralpha">
<li><p class="first">On the Main menu, click System &gt; Software Management &gt; Hotfix List.</p>
</li>
<li><p class="first">In the Available Images area, select the check box for the hotfix image, and click Install. The Install Software Hotfix popup screen opens.</p>
</li>
<li><p class="first">From the Volume set name list, select the location of the new version software volume to install the hotfix image, and click Install.</p>
<p>Important: In the Install Status list for the specified location, a progress bar indicates the status of the installation. Ensure that installation successfully completes, as indicated by the progress bar, before proceeding.</p>
</li>
</ol>
</td>
</tr>
<tr class="row-odd"><td>Install the new version software</td>
<td><ol class="first last loweralpha">
<li><p class="first">On the Main menu, click System &gt; Software Management &gt; Image List.</p>
</li>
<li><p class="first">In the Available Images area, select the check box for the new version software image, and click Install. The Install Software Image popup screen opens.</p>
</li>
<li><p class="first">From the Volume set name list, select a location to install the image, and click Install.</p>
<p>Important: In the Install Status list for the specified location, a progress bar indicates the status of the installation. Ensure that installation successfully completes, as indicated by the progress bar, before proceeding.</p>
</li>
</ol>
</td>
</tr>
</tbody>
</table>
<ol class="arabic simple" start="4">
<li>Reboot the Device B to the location of the installed new software image.</li>
</ol>
<table border="1" class="docutils">
<colgroup>
<col width="12%" />
<col width="88%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Option</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Reboot from version 11.4.0, or later</td>
<td><ol class="first last loweralpha">
<li><p class="first">On the Main menu, click System &gt; Software Management &gt; Boot Locations.</p>
</li>
<li><p class="first">In the Boot Location list, click the boot location of the installed new software image.</p>
</li>
<li><p class="first">From the Install Configuration list, select Yes. The Source Volume list appears.</p>
</li>
<li><p class="first">From the Source Volume list, select the location of the configuration to install when activating the boot location of the new software image. For example, for an installation of a new software image on HD1.3, selecting HD1.2:11.6.0 installs the version 11.6.0 configuration.</p>
</li>
<li><p class="first">Click Activate. Device A reboots to the new software image boot location in offline state.</p>
<p>Note: If the device appears to be taking a long time to reboot, do not cycle the power off and on. Instead, verify the status of the device by connecting to its serial console port. The device might be performing firmware upgrades.</p>
</li>
</ol>
</td>
</tr>
</tbody>
</table>
<ol class="arabic" start="5">
<li><p class="first">If the BIG-IP system is configured to use a network hardware security
module (HSM), reinstall and configure the HSM client software.</p>
<p>Important: You must reinstall network HSM client software on this
device, to ensure that traffic groups using the network HSM function
properly.</p>
</li>
<li><p class="first">Release Device C from offline state.</p>
<ul class="simple">
<li>On the Main menu, click Device Management &gt; Devices.</li>
<li>Click the name of Device C. The device properties screen opens.</li>
<li>Click Release Offline. Device C changes to standby state.</li>
</ul>
</li>
<li><p class="first">On the Main tab, click Device Management &gt; Overview.</p>
</li>
<li><p class="first">In the Devices area of the screen, in the Sync Status column, select
the device that shows a sync status of Changes Pending.</p>
</li>
<li><p class="first">In the Sync Options area of the screen, select Sync Device to Group.</p>
</li>
<li><p class="first">Click Sync.</p>
</li>
</ol>
<p>The new version of BIG-IP software is installed on Device C with
configured traffic groups in standby state.</p>
<p><strong>Changing states of the traffic groups</strong></p>
<p>Manually configuring active state traffic groups across devices within a
device group involves forcing an active state traffic group on a device
to standby state, and retargeting that active state traffic group to a
different device. Completing these tasks results in active state traffic
groups on the appropriate devices in a device group.</p>
<p><strong>Viewing a list of traffic groups for a device</strong></p>
<p>You can view a list of traffic groups for the device group. Using this
list, you can add floating IP addresses to a traffic group, force a
traffic group into a Standby state, and view information such as the
current and next-active devices for a traffic group and its HA load
factor.</p>
<ol class="arabic simple">
<li>On the Main tab, click Device Management &gt; Traffic Groups.</li>
<li>In the Name column, view the names of the traffic groups on the local
device.</li>
</ol>
<p><strong>Forcing a traffic group to a standby state</strong></p>
<p>You perform this task when you want the selected traffic group on the
local device to fail over to another device (that is, switch to a
Standby state). Users typically perform this task when no automated
method is configured for a traffic group, such as auto-failback or an HA
group. By forcing the traffic group into a Standby state, the traffic
group becomes active on another device in the device group. For device
groups with more than two members, you can choose the specific device to
which the traffic group fails over.</p>
<ol class="arabic simple">
<li>Log in to the device on which the traffic group is currently active.</li>
<li>On the Main tab, click Device Management &gt; Traffic Groups.</li>
<li>In the Name column, locate the name of the traffic group that you
want to run on the peer device.</li>
<li>Select the check box to the left of the traffic group name. If the
check box is unavailable, the traffic group is not active on the
device to which you are currently logged in. Perform this task on the
device on which the traffic group is active.</li>
<li>Click Force to Standby. This displays target device options.</li>
<li>Choose one of these actions:<ul>
<li>If the device group has two members only, click Force to Standby. This displays the
list of traffic groups for the device group and causes the local device to appear in
the Next Active Device column.</li>
<li>If the device group has more than two members, then from the Target Device list,
select a value and click Force to Standby.</li>
</ul>
</li>
</ol>
<p>The selected traffic group is now in a standby state on the local device
and active on another device in the device group.</p>
<p><strong>Verifying a BIG-IP device group upgrade</strong></p>
<p>When you have completed upgrading the BIG-IP device group from version
11.x to the new version, you should verify that the upgraded
configuration is working properly.</p>
<ol class="arabic">
<li><p class="first">Verify the Platform configuration for each device.</p>
<ul class="simple">
<li>On the Main menu, click System &gt; Platform.</li>
<li>For the Root Folder Device Group setting, verify that the device
group is identical on each device.</li>
<li>From the Root Folder Traffic Group list, verify that the correct
traffic group (traffic-group-1) is selected.</li>
</ul>
</li>
<li><p class="first">Verify the configuration for each device.</p>
<ul>
<li><p class="first">On the Main menu, click Device Management &gt; Devices.</p>
</li>
<li><p class="first">Verify the following information for the device and the peer devices.</p>
<ul class="simple">
<li>active-standby status</li>
<li>device name</li>
<li>management IP address</li>
<li>hostname</li>
<li>TMOS version</li>
</ul>
</li>
<li><p class="first">On the Main menu, click Device Management &gt; Device Trust &gt; Peer List.</p>
</li>
<li><p class="first">Verify that the peer devices are specified as Peer Authority Devices.</p>
<p>Note: Ensure that all information for each peer device appears
correctly and completely.</p>
</li>
</ul>
</li>
<li><p class="first">Verify the traffic groups for each device.</p>
<ul class="simple">
<li>On the Main menu, click Device Management &gt; Traffic Groups.</li>
<li>From the Name list, click a traffic group.</li>
<li>If you configured MAC Masquerade addresses for VLANs on the devices,
verify that the traffic-group-1 includes an address in the MAC
Masquerade Address field.</li>
<li>Verify that the floating traffic group is correct.</li>
<li>Verify that the failover objects are correct.</li>
</ul>
</li>
<li><p class="first">Verify the Current ConfigSync State for each device.</p>
<ul class="simple">
<li>On the Main menu, click Device Management &gt; Overview.</li>
<li>In the Devices area of the screen, in the Sync Status column, verify
that each device shows a sync status of green.</li>
</ul>
</li>
</ol>
<hr class="docutils" />
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><a class="reference external" href="https://support.f5.com/kb/en-us/products/big-ip_ltm/manuals/product/bigip-11x-software-upgrade-11-5-0/1.html">https://support.f5.com/kb/en-us/products/big-ip_ltm/manuals/product/bigip-11x-software-upgrade-11-5-0/1.html</a></p>
<p><strong>Introduction to upgrading version 11.x BIG-IP software</strong></p>
<p>Version 11.x BIG-IP systems are typically configured to employ the
functionality of a device group. When you upgrade version 11.x BIG-IP
software for a BIG-IP system device group, to the new version software,
you can use a simple sequence of steps to successfully upgrade each
device within the device group. The following steps enable you to
prepare for a software upgrade, perform the upgrade, and then verify
that the upgrade successfully completed.</p>
<ol class="arabic simple">
<li>Preparing BIG-IP modules for an upgrade</li>
<li>Preparing BIG-IP device groups for an upgrade</li>
<li>Upgrading each device within the device group</li>
<li>Changing states of the traffic groups</li>
<li>Configuring HA groups (if applicable)</li>
<li>Configuring module-specific settings</li>
<li>Verifying the software upgrade for the device group</li>
</ol>
<p><strong>Overview: Upgrading a version 11.x BIG-IP device group</strong></p>
<p>A BIG-IP system device group for version 11.x includes two or more
BIG-IP systems, with one or more traffic groups operating in active
state. In this example, a version 11.x device group includes one BIG-IP
system with traffic-group-1 operating in active state (Device A), one
BIG-IP system with traffic-group-2 operating in active state (Device B),
and one BIG-IP system with traffic-group-3 operating in active state
(Device C).</p>
<p>Important: If your version 11.x device group includes HA groups, note
that an HA group applies to the respective device in version 11.0
through 11.4.x, whereas an HA group applies to a traffic group on the
device in version 11.5, and later.</p>
<img alt="../../_images/p03.png" src="../../_images/p03.png" />
<hr class="docutils" />
<p><strong>A version 11.x device group</strong></p>
<p>When upgrading an 11.x device group to the new version software, you
first need to prepare your devices. After preparing the devices, you
force Device A to offline state, and install the new version software
onto Device A. When you finish the installation of the new version
software onto Device A, the traffic groups remain in standby state on
Device A, and in active state on Device B and Device C.</p>
<p>Important: Once Device A reboots, if the BIG-IP system is configured to
use a network hardware security module (HSM), you must reinstall network
HSM client software on Device A before upgrading Device B, to ensure
that traffic groups using the network HSM function properly.</p>
<img alt="../../_images/p04.png" src="../../_images/p04.png" />
<hr class="docutils" />
<p>A device group with Device A upgraded to the new version software, and
traffic groups in standby state</p>
<p>With the new version software installed on Device A and all traffic
groups in standby state, you force Device B to offline state, changing
the traffic groups on Device A to active state so that they can pass
traffic. You can then install the new version software onto Device B,
and reboot Device B to the location of the new version software image.</p>
<p>Important: Once Device B reboots, if the BIG-IP system is configured to
use a network HSM, you must reinstall network HSM client software on
Device B before upgrading Device C, to ensure that traffic groups using
the network HSM function properly.</p>
<img alt="../../_images/p05.png" src="../../_images/p05.png" />
<hr class="docutils" />
<p><strong>A device group with Device B upgraded to the new version software, and traffic groups in standby state</strong></p>
<p>Once Device B reboots, you can force Device C to offline state, making
traffic-group-3 active on Device B. When you complete upgrading Device C
to the new version software and reboot Device C, the BIG-IP
configuration includes traffic-group-1 and traffic-group-2 in active
state on Device A, traffic-group-3 in active state on Device B, and a
device group that includes all devices. If you use HA groups, observe
that the HA group on Device A, Device B, and Device C applies to each
traffic group.</p>
<p>Important: Once Device C reboots, if the BIG-IP system is configured to
use a network HSM, you must reinstall network HSM client software on
Device C, to ensure that traffic groups using the network HSM function
properly.</p>
<img alt="../../_images/p06.png" src="../../_images/p06.png" />
<hr class="docutils" />
<p><strong>A device group with all devices upgraded to the new version software</strong></p>
<p>Once each device is upgraded to the new version software, you can
reconfigure the traffic groups to become active on the devices that you
want by forcing the active traffic group on a device to standby state.
When forcing the traffic group to standby state, you can target the
device upon which you want that traffic group to run in active state.
For example, you can force traffic-group-2 on Device A into standby
state, and into active state on Device B, and then force traffic-group-3
on Device B into standby state, and into active state on Device C.
Additionally, if you use HA groups, you can create a unique HA group for
each traffic group on each device.</p>
<img alt="../../_images/p07.png" src="../../_images/p07.png" />
<p>A device group with an active traffic group on each device</p>
<table border="1" class="docutils">
<colgroup>
<col width="12%" />
<col width="88%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Task</strong></th>
<th class="head"><strong>Description</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Preparing the devices in the device group</td>
<td>In preparing to upgrade the BIG-IP systems to the new version software, you need to understand any specific configuration or functional changes from the previous version, and prepare the systems. You also download the new version of software from the AskF5 web site (<a class="reference external" href="http://support.f5.com/kb/en-us.html">http://support.f5.com/kb/en-us.html</a>) and import the files onto each device.</td>
</tr>
<tr class="row-odd"><td>Upgrading Device A</td>
<td><p class="first">When you complete preparation of Device A, you can force that device to offline state, changing those traffic groups to active state on another device in the traffic group, and then upgrade the software on Device A.</p>
<p class="last">Important: &nbsp;Once Device A reboots, if the BIG-IP system is configured to use a network HSM, you must reinstall network HSM client software on Device A before upgrading Device B, to ensure that traffic groups using the network HSM function properly.</p>
</td>
</tr>
<tr class="row-even"><td>Upgrading Device B</td>
<td><p class="first">When you complete preparation of Device B, you can force that device to offline state, changing those traffic groups to active state on another device in the traffic group, and then upgrade the software on Device B.</p>
<p class="last">Important:&nbsp;Once Device B reboots, if the BIG-IP system is configured to use a network HSM, you must reinstall network HSM client software on Device B before upgrading Device C, to ensure that traffic groups using the network HSM function properly.</p>
</td>
</tr>
<tr class="row-odd"><td>Upgrading Device C</td>
<td><p class="first">When you complete preparation of Device C, you can force that device to offline state, changing those traffic groups to active state on another device in the traffic group, and then upgrade the software on Device C.</p>
<p class="last">Important:&nbsp;Once Device C reboots, if the BIG-IP system is configured to use a network HSM, you must reinstall network HSM client software on Device C to ensure that traffic groups using the network HSM function properly.</p>
</td>
</tr>
<tr class="row-even"><td>Changing states of traffic groups</td>
<td>When you finish upgrading all of the devices, you can restore the configuration of active traffic groups on each device.</td>
</tr>
<tr class="row-odd"><td>Verifying the upgrade</td>
<td>Finally, you should verify that the BIG-IP device group is functioning properly.</td>
</tr>
<tr class="row-even"><td>Configuring HA groups</td>
<td>When you finish upgrading a device, the HA group on the device (in version 11.5, and later) applies to a traffic group, as opposed to the device. You can create a unique HA group for each traffic group on each device, as necessary.</td>
</tr>
<tr class="row-odd"><td>Configuring module-specific settings</td>
<td>According to your understanding of the configuration and functional changes from the previous version, you can reconfigure any customized module settings.</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<p><strong>DSC components</strong></p>
<p>Device service clustering (DSC) is based on a few key components.</p>
<p>Devices</p>
<p>A device is a physical or virtual BIG-IP system, as well as a member
of a local trust domain and a device group. Each device member has a
set of unique identification properties that the BIG-IP system
generates. For device groups configured for failover, it is
important that the device with the smallest capacity has the
capacity to process all traffic groups. This ensures application
availability in the event that all but one device in the device
group become unavailable for any reason.</p>
<p>Device groups</p>
<p>A device group is a collection of BIG-IP devices that trust each
other and can synchronize, and sometimes fail over, their BIG-IP
configuration data. You can create two types of devices groups: A
Sync-Failover device group contains devices that synchronize
configuration data and support traffic groups for failover purposes
when a device becomes unavailable. A Sync-Only device group contains
devices that synchronize configuration data, such as policy data,
but do not synchronize failover objects. The BIG-IP system supports
either homogeneous or heterogeneous hardware platforms within a
device group.</p>
<p>Important: BIG-IP module provisioning must be equivalent on all
devices within a device group. For example, module provisioning is
equivalent when all device group members are provisioned to run
BIG-IP Local Traffic Manager (LTM) and BIG-IP Application Security
Manager (ASM) only. Maintaining equivalent module provisioning on
all devices ensures that any device in the device group can process
module-specific application traffic in the event of failover from
another device.</p>
<p>Traffic groups</p>
<p>A traffic group is a collection of related configuration objects
(such as a virtual IP address and a self IP address) that run on a
BIG-IP device and process a particular type of application traffic.
When a BIG-IP device becomes unavailable, a traffic group can float
to another device in a device group to ensure that application
traffic continues to be processed with little to no interruption in
service.</p>
<p>Device trust and trust domains</p>
<p>Underlying the success of device groups and traffic groups is a
feature known as device trust. Device trust establishes trust
relationships between BIG-IP devices on the network, through mutual
certificate-based authentication. A trust domain is a collection of
BIG-IP devices that trust one another and can therefore synchronize
and fail over their BIG-IP configuration data, as well as exchange
status and failover messages on a regular basis. A local trust
domain is a trust domain that includes the local device, that is,
the device you are currently logged in to.</p>
<p>Folders</p>
<p>Folders are containers for the configuration objects on a BIG-IP
device. For every administrative partition on the BIG-IP system,
there is a high-level folder. At the highest level of the folder
hierarchy is a folder named root. The BIG-IP system uses folders to
affect the level of granularity to which it synchronizes
configuration data to other devices in the device group.</p>
<p><strong>About traffic groups</strong></p>
<p>A traffic group is a collection of related configuration objects, such
as a floating self IP address, a virtual IP address, and a SNAT
translation address, that run on a BIG-IP device. Together, these
objects process a particular type of application traffic on that device.
When a BIG-IP device becomes unavailable, a traffic group floats (that
is, fails over) to another device in a device group to ensure that
application traffic continues to be processed with little to no
interruption in service. In general, a traffic group ensures that when a
device becomes unavailable, all of the failover objects in the traffic
group fail over to any one of the available devices in the device group.</p>
<p>A traffic group is initially active on the device on which you create
it, until the traffic group fails over to another device. For example,
if you initially create three traffic groups on Device A, these traffic
groups remain active on Device A until one or more traffic groups fail
over to another device. If you want an active traffic group to become
active on a different device in the device group when failover has not
occurred, you can intentionally force the traffic group to switch to a
standby state, thereby causing failover to another device.</p>
<p>Only objects with floating IP addresses can be members of a floating
traffic group.</p>
<p>An example of a set of objects in a traffic group is an iApps
application service. If a device with this traffic group is a member of
a device group, and the device becomes unavailable, the traffic group
floats to another member of the device group, and that member becomes
the device that processes the application traffic.</p>
<p>Note: A Sync-Failover device group can support a maximum of 15 floating
traffic groups.</p>
<p><strong>About forcing a device offline</strong></p>
<p>You can force a BIG-IP device into an offline state, which stops that
device from processing or responding to local traffic connections. When
the device is in offline state, you can upgrade the software on that
device or perform maintenance on that device.</p>
<p>When the BIG-IP system is forced offline, it terminates existing
connections to local traffic objects, such as virtual servers, SNATs,
and so on. In the forced offline state, the BIG-IP system does not allow
new connections.</p>
<p>For BIG-IP systems running software version 11.1.0 and later, the Force
Offline status persists through system reboots and upgrades. For BIG-IP
systems running software versions earlier than 11.1.0, the Force Offline
status does not persist through system reboots.</p>
<p>The BIG-IP system allows administrative connections to the management
address to continue, but handles administrative connections to self IP
addresses differently, depending on the platform:</p>
<p>On appliance systems, the system maintains connections to self IP
addresses.</p>
<p>On VIPRION systems, the system terminates connections to self IP
addresses, and does not allow new connections.</p>
<p>Note: When you force a chassis system offline, the Traffic Management
Microkernel (TMM) interfaces remain configured until the unit is
rebooted. If the chassis is rebooted while Force Offline is enabled, the
system marks all TMM interfaces as Uninitialized or Missing. This
behavior is by design. The system will not attempt to initialize and
bring up TMM interfaces while the system is in the offline state.</p>
<p>When you force VIPRION platforms offline, make sure to manage the system
by using the management port or console. The system terminates
connections to self IP addresses when you force the platform offline.</p>
<p>You will want to force the standby devices offline before you change the
redundancy state (such as resetting the device trust for a device
group). Forcing standby devices into offline state prevents a standby
device from unexpectedly becoming active.</p>
<p><strong>Task summary</strong></p>
<p>The upgrade process involves preparation of the BIG-IP devices (Device
A, Device B, and Device C) configured in device group, followed by the
installation and verification of the new version software on each
device. When you upgrade each device, you perform several tasks.
Completing these tasks results in a successful upgrade to the new
version software on all BIG-IP devices, with the device group configured
properly.</p>
<p><strong>Local Traffic Manager system preparation</strong></p>
<p>The BIG-IP Local Traffic Manager (LTM) system does not require specific
preparation when upgrading from version 11.x to the new version
software. No additional configuration is required after completing the
upgrade to the new version software.</p>
<p><strong>HTTP Class profiles</strong></p>
<p>F5 replaced the HTTP Class profile in BIG-IP version 11.4.0,
and later, with the introduction of the Local Traffic Policies feature.
During an upgrade to BIG-IP version 11.4.0, if your configuration
contains an HTTP Class profile, the BIG-IP system attempts to migrate
the HTTP Class profile to an equivalent local traffic policy. For
additional support information regarding the change of HTTP Class
profiles to Local Traffic Policies, refer to SOL14409 on www.askf5.com.</p>
<p><strong>Policy Enforcement Manager system preparation</strong></p>
<p>The BIG-IP Policy Enforcement Manager (PEM) system does not require
specific preparation when upgrading from version 11.x to the new version
software. No additional configuration is required after completing the
upgrade to the new version software.</p>
<p><strong>Preparing BIG-IP device groups for an upgrade</strong></p>
<p>The following prerequisites apply when you upgrade BIG-IP device groups
from version 11.x to the new version.</p>
<ul class="simple">
<li>The BIG-IP systems (Device A, Device B, and Device C) are configured
as a device group.</li>
<li>Each BIG-IP device is running the same version of 11.x software.</li>
<li>The BIG-IP version 11.x devices are the same model of hardware.</li>
</ul>
<p>When you upgrade a BIG-IP device group from version 11.x to the new
version, you begin by preparing the devices.</p>
<p>Note: If you prefer to closely observe the upgrade of each device, you
can optionally connect to the serial console port of the device that you
are upgrading.</p>
<ol class="arabic simple">
<li>For each device, complete the following steps to prepare the
configuration and settings.</li>
</ol>
<ol class="loweralpha simple">
<li>Examine the Release Notes for specific configuration requirements,
and reconfigure the systems, as necessary.</li>
<li>Examine the Release Notes for specific changes to settings that occur
when upgrading from version 11.x to the new version, and complete any
in-process settings.</li>
</ol>
<ol class="arabic simple" start="2">
<li>From the device that is running the latest configuration, synchronize
the configuration to the devices in the device group.</li>
</ol>
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="77%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Option</strong></th>
<th class="head"><strong>Description</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>For version 11.2, and earlier.</strong></td>
<td><ol class="first last loweralpha simple">
<li>On the Main menu, click&nbsp; <strong>Device Management</strong>&nbsp;&gt;&nbsp;<strong>Device Groups</strong>. A list of device groups appears.</li>
<li>In the Group Name column, click the name of a device group.</li>
<li>On the menu bar, click&nbsp; <strong>ConfigSync</strong>.</li>
<li>Click&nbsp; <strong>Synchronize To Group</strong>.</li>
</ol>
</td>
</tr>
<tr class="row-odd"><td><strong>For version 11.3, and later.</strong></td>
<td><ol class="first last loweralpha simple">
<li>On the Main menu, click&nbsp; <strong>Device Management</strong>&nbsp;&gt;&nbsp;<strong>Overview</strong>. A message appears for the Status Message.</li>
<li>In the Devices area of the screen, in the Sync Status column, click the device that shows a sync status of&nbsp;Changes Pending.</li>
<li>Click&nbsp; <strong>Synchronize Device to Group</strong>.</li>
</ol>
</td>
</tr>
</tbody>
</table>
<ol class="arabic" start="3">
<li><p class="first">For each device, create a QKView file, and upload it to iHealth.</p>
<ul class="simple">
<li>On the Main menu, click&nbsp; <strong>System</strong>&nbsp;&gt;&nbsp;<strong>Support</strong>.&nbsp;The Support screen opens.</li>
<li>Select the&nbsp; <strong>QKView</strong>&nbsp;check box.</li>
<li>Click&nbsp; <strong>Start</strong>.&nbsp;The BIG-IP system creates a QKView file.</li>
<li>Click&nbsp; <strong>Download Snapshot File</strong>, and click&nbsp; <strong>Save</strong>.&nbsp;The
BIG-IP system downloads the QKView file,
namedcase_number_###_support_file.qkview, into the browser’s
download folder.</li>
<li>Rename the QKView file to include a case number and an
identifier.&nbsp;An example of a renamed file
is:c123456_A_support_file.qkview.</li>
<li>Go to&nbsp;<a class="reference external" href="https://ihealth.f5.com">https://ihealth.f5.com</a>, and log in using your F5 WebSupport
credentials.</li>
<li>Click&nbsp; <strong>Upload</strong>.</li>
<li>Click&nbsp; <strong>Browse</strong>, navigate to the QKView file in the download
folder, and then click&nbsp; <strong>Open</strong>.</li>
<li>Click&nbsp; <strong>Upload QKView(s)</strong>.</li>
</ul>
</li>
<li><p class="first">For each device, create a backup file.</p>
<ul class="simple">
<li>Access the&nbsp; <strong>tmsh</strong>&nbsp;command line utility.</li>
<li>At the prompt, type&nbsp; <strong>save /sys ucs /shared/filename.ucs</strong>.</li>
<li>Copy the backup file to a safe location on your network.</li>
</ul>
<p>Note:&nbsp;For additional support information about backing up and
restoring BIG-IP system configuration files, refer to SOL11318
on www.askf5.com.</p>
</li>
<li><p class="first">Download either the latest BIG-IP system hotfix image file, if
available, or the new version software image file from the AskF5
downloads web site (<a class="reference external" href="http://support.f5.com/kb/en-us.htm">http://support.f5.com/kb/en-us.htm</a>) to a
preferred location.</p>
<p>Note:&nbsp;Using a tool or utility that computes an md5 checksum,
you can verify the integrity of the BIG-IP system latest
hotfix&nbsp;.isofile or new version&nbsp;.iso&nbsp;file in the preferred location.</p>
</li>
<li><p class="first">Import either the latest BIG-IP system hotfix image file, if
available, or the new version software image file to each device.</p>
</li>
</ol>
<table border="1" class="docutils">
<colgroup>
<col width="27%" />
<col width="73%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Option</strong></th>
<th class="head"><strong>Description</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>Import the latest BIG-IP system hotfix image file</strong></td>
<td><ol class="first last loweralpha simple">
<li>On the Main menu, click&nbsp; <strong>System</strong>&nbsp;&gt;&nbsp;<strong>Software Management</strong>&nbsp;&gt;&nbsp;<strong>Hotfix List</strong>&nbsp;&gt;&nbsp;<strong>Import</strong>.</li>
<li>Click&nbsp; <strong>Browse</strong>, locate and click the image file, click&nbsp; <strong>Open</strong>, and click&nbsp; <strong>Import</strong>.</li>
<li>When the hotfix image file completes uploading to the BIG-IP device, click&nbsp; <strong>OK</strong>. A link to the image file appears in the Software Image list.</li>
</ol>
</td>
</tr>
<tr class="row-odd"><td><strong>Import the new version software image file</strong></td>
<td><ol class="first last loweralpha simple">
<li>On the Main menu, click&nbsp; <strong>System</strong>&nbsp;&gt;&nbsp;<strong>Software Management</strong>&nbsp;&gt;&nbsp;<strong>Image List</strong>&nbsp;&gt;&nbsp;<strong>Import</strong>.</li>
<li>Click&nbsp; <strong>Browse</strong>, locate and click the image file, click&nbsp; <strong>Open</strong>, and click&nbsp; <strong>Import</strong>.</li>
<li>When the software image file completes uploading to the BIG-IP device, click&nbsp; <strong>OK</strong>. A link to the image file appears in the Software Image list.</li>
</ol>
</td>
</tr>
</tbody>
</table>
<ol class="arabic simple" start="7">
<li>If the BIG-IP system is configured to use a network hardware security
module (HSM), the HSM client software must be available for
reinstallation.</li>
</ol>
<p>Important: Make sure that the available version of HSM client software
supports the new version of BIG-IP software.</p>
<p>The BIG-IP devices are prepared to install the latest hotfix or new
version software.</p>
<p><strong>Upgrading the Device A system</strong></p>
<p>The following prerequisites apply for this task.</p>
<ul class="simple">
<li>Each device must be prepared to upgrade Device A with the new version
software.</li>
<li>Either the latest hotfix image file, if available, or the new version
software image file is downloaded and accessible.</li>
</ul>
<p>After you prepare each device for upgrading the software, you force the
device offline, reactivate the software license, and install the new
version software onto Device A.</p>
<ol class="arabic">
<li><p class="first">Force Device A to offline state.</p>
<ul class="simple">
<li>On the Main menu, click Device Management &gt; Devices.</li>
<li>Click the name of Device A. The device properties screen opens.</li>
<li>Click Force Offline. Device A changes to offline state.</li>
</ul>
<p>Important: Once Device A changes to offline state, ensure that
traffic passes normally for all active traffic groups on the other
devices.</p>
<p>Note: When Force Offline is enabled, make sure to manage the system
using the management port or console. Connections to self IP
addresses are terminated when Force Offline is enabled.</p>
</li>
<li><p class="first">Reactivate the software license.</p>
<ul class="simple">
<li>On the Main menu, click System &gt; License.</li>
<li>Click Re-activate.</li>
<li>For the Activation Method setting, select the Automatic (requires
outbound connectivity) option.</li>
<li>Click Next. The BIG-IP software license renews automatically.</li>
<li>Click Continue.</li>
<li>Install either the latest hotfix image, if available, or the new
version software.</li>
</ul>
</li>
</ol>
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="86%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Option</strong></th>
<th class="head"><strong>Description</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>Install the latest hotfix image</strong></td>
<td><ol class="first last loweralpha">
<li><p class="first">On the Main menu, click&nbsp;<strong>System</strong>&nbsp;&gt;&nbsp;<strong>Software Management</strong>&nbsp;&gt;&nbsp;<strong>Hotfix List</strong>.</p>
</li>
<li><p class="first">In the Available Images area, select the check box for the hotfix image, and click&nbsp;<strong>Install</strong>. The Install Software Hotfix popup screen opens.</p>
</li>
<li><p class="first">From the&nbsp;<strong>Volume set name</strong>&nbsp;list, select the location of the new version software volume to install the hotfix image, and click&nbsp;<strong>Install</strong>.</p>
<p>Important:&nbsp;In the&nbsp;<strong>Install Status</strong>&nbsp;list for the specified location, a progress bar indicates the status of the installation. Ensure that installation successfully completes, as indicated by the progress bar, before proceeding.</p>
</li>
</ol>
</td>
</tr>
<tr class="row-odd"><td><strong>Install the new version software</strong></td>
<td><ol class="first last loweralpha">
<li><p class="first">On the Main menu, click&nbsp;<strong>System</strong>&nbsp;&gt;&nbsp;<strong>Software Management</strong>&nbsp;&gt;&nbsp;<strong>Image List</strong>.</p>
</li>
<li><p class="first">In the Available Images area, select the check box for the new version software image, and click <strong>Install</strong>. The Install Software Image popup screen opens.</p>
</li>
<li><p class="first">From the&nbsp;<strong>Volume set name</strong>&nbsp;list, select a location to install the image, and click&nbsp;<strong>Install</strong>.</p>
<p>Important:&nbsp;In the&nbsp;<strong>Install Status</strong>&nbsp;list for the specified location, a progress bar indicates the status of the installation. Ensure that installation successfully completes, as indicated by the progress bar, before proceeding.</p>
</li>
</ol>
</td>
</tr>
</tbody>
</table>
<ol class="arabic simple" start="4">
<li>Reboot the device to the location of the installed new software
image.</li>
</ol>
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="86%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Option</strong></th>
<th class="head"><strong>Description</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>Reboot from version 11.3.0, or earlier</strong></td>
<td><ol class="first last loweralpha">
<li><p class="first">On the Main menu, click System &gt; Software Management &gt; Boot Locations.</p>
</li>
<li><p class="first">In the Boot Location list, click the boot location of the installed new software image.</p>
</li>
<li><p class="first">Note: Upgrading from version 11.3.0, or earlier, automatically installs the configuration of that version to the new boot location.</p>
</li>
<li><p class="first">Click Activate. Device A reboots to the new software image boot location in offline state.</p>
<p>Note: If the device appears to be taking a long time to reboot, do not cycle the power off and on. Instead, verify the status of the device by connecting to its serial console port. The device might be performing firmware upgrades.</p>
</li>
</ol>
</td>
</tr>
<tr class="row-odd"><td><strong>Reboot from version 11.4.0, or later</strong></td>
<td><ol class="first last loweralpha">
<li><p class="first">On the Main menu, click System &gt; Software Management &gt; Boot Locations.</p>
</li>
<li><p class="first">In the Boot Location list, click the boot location of the installed new software image.</p>
</li>
<li><p class="first">From the Install Configuration list, select Yes. The Source Volume list appears.</p>
</li>
<li><p class="first">From the Source Volume list, select the location of the configuration to install when activating the boot location of the new software image. For example, for an installation of a new software image on HD1.3, selecting HD1.2:11.6.0 installs the version 11.6.0 configuration.</p>
</li>
<li><p class="first">Click Activate. Device A reboots to the new software image boot location in offline state.</p>
<p>Note: If the device appears to be taking a long time to reboot, do not cycle the power off and on. Instead, verify the status of the device by connecting to its serial console port. The device might be performing firmware upgrades.</p>
</li>
</ol>
</td>
</tr>
</tbody>
</table>
<ol class="arabic" start="5">
<li><p class="first">If the BIG-IP system is configured to use a network hardware security
module (HSM), reinstall and configure the HSM client software.</p>
<p>Important: You must reinstall network HSM client software on this
device before upgrading another device in the device group, to
ensure that traffic groups using the network HSM function properly.</p>
</li>
<li><p class="first">Release Device A from offline state.</p>
<ul class="simple">
<li>On the Main menu, click Device Management &gt; Devices.</li>
<li>Click the name of Device A. The device properties screen opens.</li>
<li>Click Release Offline. Device A changes to standby state.</li>
</ul>
</li>
</ol>
<p>The new version of BIG-IP software is installed on Device A, with all
traffic groups in standby state.</p>
<p><strong>Upgrading the Device B system</strong></p>
<p>The following prerequisites apply in upgrading Device B.</p>
<ul class="simple">
<li>Device B must be prepared to upgrade the software to new version
software.</li>
<li>Either the latest hotfix image file, if available, or the new version
software image file is downloaded and accessible.</li>
<li>If the BIG-IP system is configured to use a network hardware security
module (HSM), you must reinstall network HSM client software on
Device A before upgrading Device B, to ensure that traffic groups
using the network HSM function properly.</li>
<li>Device A (the new version BIG-IP device) is in standby state.</li>
</ul>
<p>After you prepare Device B for upgrading the software, you force the
device offline, reactivate the software license, and install the new
version software.</p>
<ol class="arabic">
<li><p class="first">Force Device B to offline state.</p>
<ul class="simple">
<li>On the Main menu, click Device Management &gt; Devices.</li>
<li>Click the name of Device B. The device properties screen opens.</li>
<li>Click Force Offline. Device B changes to offline state.</li>
</ul>
<p>Important: Once Device B changes to offline state, ensure that
Device A passes traffic normally for all active traffic groups.</p>
<p>Note: When Force Offline is enabled, make sure to manage the system
using the management port or console. Connections to self IP
addresses are terminated when Force Offline is enabled.</p>
</li>
<li><p class="first">Reactivate the software license.</p>
<ul class="simple">
<li>On the Main menu, click System &gt; License.</li>
<li>Click Re-activate.</li>
<li>For the Activation Method setting, select the Automatic (requires
outbound connectivity) option.</li>
<li>Click Next. The BIG-IP software license renews automatically.</li>
<li>Click Continue.</li>
</ul>
</li>
<li><p class="first">Install either the latest hotfix image, if available, or the new version software.</p>
</li>
</ol>
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="86%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Option</strong></th>
<th class="head"><strong>Description</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>Install the latest hotfix image</strong></td>
<td><ol class="first last loweralpha">
<li><p class="first">On the Main menu, click&nbsp; <strong>System</strong>&nbsp;&gt;&nbsp;<strong>Software Management</strong>&nbsp;&gt;&nbsp;<strong>Hotfix List</strong>.</p>
</li>
<li><p class="first">In the Available Images area, select the check box for the hotfix image, and click&nbsp; <strong>Install</strong>. The Install Software Hotfix popup screen opens.</p>
</li>
<li><p class="first">From the&nbsp; <strong>Volume set name</strong>&nbsp;list, select the location of the new version software volume to install the hotfix image, and click&nbsp; <strong>Install</strong>.</p>
<p>Important:&nbsp;In the&nbsp; <strong>Install Status</strong>&nbsp;list for the specified location, a progress bar indicates the status of the installation. Ensure that installation successfully completes, as indicated by the progress bar, before proceeding.</p>
</li>
</ol>
</td>
</tr>
<tr class="row-odd"><td><strong>Install the new version software</strong></td>
<td><ol class="first last loweralpha">
<li><p class="first">On the Main menu, click&nbsp; <strong>System</strong>&nbsp;&gt;&nbsp;<strong>Software Management</strong>&nbsp;&gt;&nbsp;<strong>Image List</strong>.</p>
</li>
<li><p class="first">In the Available Images area, select the check box for the new version software image, and click <strong>Install</strong>. The Install Software Image popup screen opens.</p>
</li>
<li><p class="first">From the&nbsp; <strong>Volume set name</strong>&nbsp;list, select a location to install the image, and click&nbsp; <strong>Install</strong>.</p>
<p>Important:&nbsp;In the&nbsp; <strong>Install Status</strong>&nbsp;list for the specified location, a progress bar indicates the status of the installation. Ensure that installation successfully completes, as indicated by the progress bar, before proceeding.</p>
</li>
</ol>
</td>
</tr>
</tbody>
</table>
<ol class="arabic simple" start="4">
<li>Reboot the Device B to the location of the installed new software image.</li>
</ol>
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="86%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Option</strong></th>
<th class="head"><strong>Description</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>Reboot from version 11.3.0, or earlier</strong></td>
<td><ol class="first loweralpha">
<li><p class="first">On the Main menu, click&nbsp; <strong>System</strong>&nbsp;&gt;&nbsp;<strong>Software Management</strong>&nbsp;&gt;&nbsp;<strong>Boot Locations</strong>.</p>
</li>
<li><p class="first">In the Boot Location list, click the boot location of the installed new software image.</p>
<p>Note:&nbsp;Upgrading from version 11.3.0, or earlier, automatically installs the configuration of that version to the new boot location.</p>
</li>
</ol>
<ol class="last loweralpha">
<li><p class="first">Click&nbsp; <strong>Activate</strong>. Device B reboots to the new software image boot location in offline state.</p>
<p>Note:&nbsp;If the device appears to be taking a long time to reboot, do not cycle the power off and on. Instead, verify the status of the device by connecting to its serial console port. The device might be performing firmware upgrades.</p>
</li>
</ol>
</td>
</tr>
<tr class="row-odd"><td><strong>Reboot from version 11.4.0, or later</strong></td>
<td><ol class="first last loweralpha">
<li><p class="first">On the Main menu, click&nbsp; <strong>System</strong>&nbsp;&gt;&nbsp;<strong>Software Management</strong>&nbsp;&gt;&nbsp;<strong>Boot Locations</strong>.</p>
</li>
<li><p class="first">In the Boot Location list, click the boot location of the installed new software image.</p>
</li>
<li><p class="first">From the&nbsp; <strong>Install Configuration</strong>&nbsp;list, select&nbsp; <strong>Yes</strong>. The&nbsp; <strong>Source Volume</strong>&nbsp;list appears.</p>
</li>
<li><p class="first">From the&nbsp; <strong>Source Volume</strong>&nbsp;list, select the location of the configuration to install when activating the boot location of the new software image. For example, for an installation of a new software image on HD1.3, selecting&nbsp; <strong>HD1.2:11.6.0</strong>&nbsp;installs a version 11.6.0 configuration.</p>
</li>
<li><p class="first">Click&nbsp; <strong>Activate</strong>. Device B reboots to the new software image boot location in offline state.</p>
<p>Note:&nbsp;If the device appears to be taking a long time to reboot, do not cycle the power off and on. Instead, verify the status of the device by connecting to its serial console port. The device might be performing firmware upgrades.</p>
</li>
</ol>
</td>
</tr>
</tbody>
</table>
<ol class="arabic" start="5">
<li><p class="first">If the BIG-IP system is configured to use a network HSM, reinstall
and configure the HSM client software.</p>
<p>Important: You must reinstall network HSM client software on this
device before upgrading another device in the device group, to
ensure that traffic groups using the network HSM function properly.</p>
</li>
<li><p class="first">Release Device B from offline state.</p>
<ul class="simple">
<li>On the Main menu, click Device Management &gt; Devices.</li>
<li>Click the name of Device B. The device properties screen opens.</li>
<li>Click Release Offline. Device B changes to standby state.</li>
</ul>
</li>
</ol>
<p>The new version of BIG-IP software is installed on Device B with
configured traffic groups in standby state.</p>
<p><strong>Upgrading the Device C system</strong></p>
<p>The following prerequisites apply in upgrading Device C.</p>
<ul class="simple">
<li>Device C must be prepared to upgrade the software to new version
software.</li>
<li>Either the latest hotfix image file, if available, or the new version
software image file is downloaded and accessible.</li>
<li>If the BIG-IP system is configured to use a network hardware security
module (HSM), you must reinstall network HSM client software on
Device B before upgrading Device C, to ensure that traffic groups
using the network HSM function properly.</li>
<li>Device C is in active state.</li>
</ul>
<p>After you prepare Device C for upgrading the software, you force the
device offline, reactivate the software license, and install the new
version software.</p>
<ol class="arabic">
<li><p class="first">Force Device C to offline state.</p>
<ul class="simple">
<li>On the Main menu, click Device Management &gt; Devices.</li>
<li>Click the name of Device C. The device properties screen opens.</li>
<li>Click Force Offline. Device C changes to offline state.</li>
</ul>
<p>Important: Once Device C changes to offline state, ensure that the
other devices pass traffic normally for all active traffic groups.</p>
<p>Note: When Force Offline is enabled, make sure to manage the system
using the management port or console. Connections to self IP
addresses are terminated when Force Offline is enabled.</p>
</li>
<li><p class="first">Reactivate the software license.</p>
<ul class="simple">
<li>On the Main menu, click System &gt; License.</li>
<li>Click Re-activate.</li>
<li>For the Activation Method setting, select the Automatic (requires
outbound connectivity) option.</li>
<li>Click Next. The BIG-IP software license renews automatically.</li>
<li>Click Continue.</li>
</ul>
</li>
<li><p class="first">Install either the latest hotfix image, if available, or the new version software.</p>
</li>
</ol>
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="86%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Option</strong></th>
<th class="head"><strong>Description</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>Install the latest hotfix image</strong></td>
<td><ol class="first last loweralpha">
<li><p class="first">On the Main menu, click&nbsp; <strong>System</strong>&nbsp;&gt;&nbsp;<strong>Software Management</strong>&nbsp;&gt;&nbsp;<strong>Hotfix List</strong>.</p>
</li>
<li><p class="first">In the Available Images area, select the check box for the hotfix image, and click&nbsp; <strong>Install</strong>. The Install Software Hotfix popup screen opens.</p>
</li>
<li><p class="first">From the&nbsp; <strong>Volume set name</strong>&nbsp;list, select the location of the new version software volume to install the hotfix image, and click&nbsp; <strong>Install</strong>.</p>
<p>Important:&nbsp;In the&nbsp; <strong>Install Status</strong>&nbsp;list for the specified location, a progress bar indicates the status of the installation. Ensure that installation successfully completes, as indicated by the progress bar, before proceeding.</p>
</li>
</ol>
</td>
</tr>
<tr class="row-odd"><td><strong>Install the new version software</strong></td>
<td><ol class="first last loweralpha">
<li><p class="first">On the Main menu, click&nbsp; <strong>System</strong>&nbsp;&gt;&nbsp;<strong>Software Management</strong>&nbsp;&gt;&nbsp;<strong>Image List</strong>.</p>
</li>
<li><p class="first">In the Available Images area, select the check box for the new version software image, and click <strong>Install</strong>. The Install Software Image popup screen opens.</p>
</li>
<li><p class="first">From the&nbsp; <strong>Volume set name</strong>&nbsp;list, select a location to install the image, and click&nbsp; <strong>Install</strong>.</p>
<p>Important:&nbsp;In the&nbsp; <strong>Install Status</strong>&nbsp;list for the specified location, a progress bar indicates the status of the installation. Ensure that installation successfully completes, as indicated by the progress bar, before proceeding.</p>
</li>
</ol>
</td>
</tr>
</tbody>
</table>
<ol class="arabic simple" start="4">
<li>Reboot Device C to the location of the installed new software image.</li>
</ol>
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="86%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Option</strong></th>
<th class="head"><strong>Description</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>Reboot from version 11.3.0, or earlier</strong></td>
<td><ol class="first loweralpha">
<li><p class="first">On the Main menu, click&nbsp; <strong>System</strong>&nbsp;&gt;&nbsp;<strong>Software Management</strong>&nbsp;&gt;&nbsp;<strong>Boot Locations</strong>.</p>
</li>
<li><p class="first">In the Boot Location list, click the boot location of the installed new software image.</p>
<p>Note:&nbsp;Upgrading from version 11.3.0, or earlier, automatically installs the configuration of that version to the new boot location.</p>
</li>
</ol>
<ol class="last loweralpha">
<li><p class="first">Click&nbsp; <strong>Activate</strong>. Device C reboots to the new software image boot location in offline state.</p>
<p>Note:&nbsp;If the device appears to be taking a long time to reboot, do not cycle the power off and on. Instead, verify the status of the device by connecting to its serial console port. The device might be performing firmware upgrades.</p>
</li>
</ol>
</td>
</tr>
<tr class="row-odd"><td><strong>Reboot from version 11.4.0, or later</strong></td>
<td><ol class="first last loweralpha">
<li><p class="first">On the Main menu, click&nbsp; <strong>System</strong>&nbsp;&gt;&nbsp;<strong>Software Management</strong>&nbsp;&gt;&nbsp;<strong>Boot Locations</strong>.</p>
</li>
<li><p class="first">In the Boot Location list, click the boot location of the installed new software image.</p>
</li>
<li><p class="first">From the&nbsp; <strong>Install Configuration</strong>&nbsp;list, select&nbsp; <strong>Yes</strong>. The&nbsp; <strong>Source Volume</strong>&nbsp;list appears.</p>
</li>
<li><p class="first">From the&nbsp; <strong>Source Volume</strong>&nbsp;list, select the location of the configuration to install when activating the boot location of the new software image. For example, for an installation of a new software image on HD1.3, selecting&nbsp; <strong>HD1.2:11.6.0</strong>&nbsp;installs a version 11.6.0 configuration.</p>
</li>
<li><p class="first">Click&nbsp; <strong>Activate</strong>. Device C reboots to the new software image boot location in offline state.</p>
<p>Note:&nbsp;If the device appears to be taking a long time to reboot, do not cycle the power off and on. Instead, verify the status of the device by connecting to its serial console port. The device might be performing firmware upgrades.</p>
</li>
</ol>
</td>
</tr>
</tbody>
</table>
<ol class="arabic" start="5">
<li><p class="first">If the BIG-IP system is configured to use a network hardware security
module (HSM), reinstall and configure the HSM client software.</p>
<p>Important: You must reinstall network HSM client software on this
device, to ensure that traffic groups using the network HSM function
properly.</p>
</li>
<li><p class="first">Release Device C from offline state.</p>
<ul class="simple">
<li>On the Main menu, click Device Management &gt; Devices.</li>
<li>Click the name of Device C. The device properties screen opens.</li>
<li>Click Release Offline. Device C changes to standby state.</li>
<li>On the Main tab, click Device Management &gt; Overview.</li>
</ul>
</li>
</ol>
<ol class="arabic simple" start="8">
<li>In the Devices area of the screen, in the Sync Status column, select
the device that shows a sync status of Changes Pending.</li>
<li>In the Sync Options area of the screen, select Sync Device to Group.</li>
<li>Click Sync.</li>
</ol>
<p>The new version of BIG-IP software is installed on Device C with
configured traffic groups in standby state.</p>
<p><strong>Changing states of the traffic groups</strong></p>
<p>Manually configuring active state traffic groups across devices within a
device group involves forcing an active state traffic group on a device
to standby state, and retargeting that active state traffic group to a
different device. Completing these tasks results in active state traffic
groups on the appropriate devices in a device group.</p>
<p><strong>Viewing a list of traffic groups for a device</strong></p>
<p>You can view a list of traffic groups for the device group. Using this
list, you can add floating IP addresses to a traffic group, force a
traffic group into a Standby state, and view information such as the
current and next-active devices for a traffic group and its HA load
factor.</p>
<ol class="arabic simple">
<li>On the Main tab, click Device Management &gt; Traffic Groups.</li>
<li>In the Name column, view the names of the traffic groups on the local
device.</li>
</ol>
<p><strong>Forcing a traffic group to a standby state</strong></p>
<p>You perform this task when you want the selected traffic group on the
local device to fail over to another device (that is, switch to a
Standby state). Users typically perform this task when no automated
method is configured for a traffic group, such as auto-failback or an HA
group. By forcing the traffic group into a Standby state, the traffic
group becomes active on another device in the device group. For device
groups with more than two members, you can choose the specific device to
which the traffic group fails over.</p>
<ol class="arabic simple">
<li>Log in to the device on which the traffic group is currently active.</li>
<li>On the Main tab, click Device Management &gt; Traffic Groups.</li>
<li>In the Name column, locate the name of the traffic group that you
want to run on the peer device.</li>
<li>Select the check box to the left of the traffic group name. If the
check box is unavailable, the traffic group is not active on the
device to which you are currently logged in. Perform this task on the
device on which the traffic group is active.</li>
<li>Click Force to Standby. This displays target device options.</li>
<li>Choose one of these actions:</li>
</ol>
<ul class="simple">
<li>If the device group has two members only, click Force to Standby.
This displays the list of traffic groups for the device group and
causes the local device to appear in the Next Active Device column.</li>
<li>If the device group has more than two members, then from the Target
Device list, select a value and click Force to Standby.</li>
</ul>
<p>The selected traffic group is now in a standby state on the local device
and active on another device in the device group.</p>
<p><strong>Verifying a BIG-IP device group upgrade</strong></p>
<p>When you have completed upgrading the BIG-IP device group from version
11.x to the new version, you should verify that the upgraded
configuration is working properly.</p>
<ol class="arabic">
<li><p class="first">Verify the Platform configuration for each device.</p>
<ul class="simple">
<li>On the Main menu, click System &gt; Platform.</li>
<li>For the Root Folder Device Group setting, verify that the device
group is identical on each device.</li>
<li>From the Root Folder Traffic Group list, verify that the correct
traffic group (traffic-group-1) is selected.</li>
</ul>
</li>
<li><p class="first">Verify the configuration for each device.</p>
<ul class="simple">
<li>On the Main menu, click Device Management &gt; Devices.</li>
<li>Verify the following information for the device and the peer devices.<ul>
<li>active-standby status</li>
<li>device name</li>
<li>management IP address</li>
<li>hostname</li>
<li>TMOS version</li>
</ul>
</li>
<li>On the Main menu, click Device Management &gt; Device Trust &gt; Peer List.</li>
<li>Verify that the peer devices are specified as Peer Authority Devices.</li>
</ul>
<p>Note: Ensure that all information for each peer device appears
correctly and completely.</p>
</li>
<li><p class="first">Verify the traffic groups for each device.</p>
<ul class="simple">
<li>On the Main menu, click Device Management &gt; Traffic Groups.</li>
<li>From the Name list, click a traffic group.</li>
<li>If you configured MAC Masquerade addresses for VLANs on the devices,
verify that the traffic-group-1 includes an address in the MAC
Masquerade Address field.</li>
<li>Verify that the floating traffic group is correct.</li>
<li>Verify that the failover objects are correct.</li>
</ul>
</li>
<li><p class="first">Verify the Current ConfigSync State for each device.</p>
<ul class="simple">
<li>On the Main menu, click Device Management &gt; Overview.</li>
<li>In the Devices area of the screen, in the Sync Status column, verify
that each device shows a sync status of green.</li>
</ul>
</li>
</ol>
<p><strong>Implementation result</strong></p>
<p>Your upgrade of the BIG-IP device group from version 11.x to the new
version software is now complete. The new version software configuration
includes a device group with three devices (Device A, Device B, and
Device C) and three traffic groups (traffic-group-1, traffic-group-2,
and traffic-group-3), with a traffic group on each device in active
state.</p>
<img alt="../../_images/p08.png" src="../../_images/p08.png" />
<p>An upgraded device group</p>
<hr class="docutils" />
<div class="line-block">
<div class="line"><br /></div>
</div>
<iframe width="560" height="315" src="https://www.youtube.com/embed/3uDzuRZ47FA?rel=0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe><div class="line-block">
<div class="line"><br /></div>
</div>
<hr class="docutils" />
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="objective-1-06-describe-the-benefits-of-custom-alerting-within-an-ltm-environment">
<h2>Objective - 1.06 - Describe the benefits of custom alerting within an LTM environment<a class="headerlink" href="#objective-1-06-describe-the-benefits-of-custom-alerting-within-an-ltm-environment" title="Permalink to this headline">¶</a></h2>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
<p><strong>1.06 - Describe how to specify the OIDs for alerting</strong></p>
<p><a class="reference external" href="https://support.f5.com/csp/article/K3727">https://support.f5.com/csp/article/K3727</a></p>
<p><strong>Creating custom SNMP traps</strong></p>
<p>Before you create a custom trap, you must determine the unique syslog
messages for which you want the system to send alerts. The message must
not match the matched_message value of any other SNMP trap already
defined in the /etc/alertd/alert.conf file or the
/config/user_alert.conf file.</p>
<p>Note: For information about how to determine which alerts are
pre-configured to trigger an SNMP trap, refer to K6414: Determining
which alerts are pre-configured to trigger an SNMP trap. You may also
examine the alerts from the /config/user_alert.conf file in the same
manner.</p>
<p>To create a custom SNMP trap, perform the following procedure:</p>
<ol class="arabic">
<li><p class="first">Log in to the command line.</p>
</li>
<li><p class="first">To back up your /config/user_alert.conf file, type the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cp /config/user_alert.conf /config/user_alert.conf.SOL3727
</pre></div>
</div>
</li>
<li><p class="first">Edit the /config/user_alert.conf file.</p>
</li>
<li><p class="first">Add a new SNMP trap using the following format:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>alert &lt;alert_name&gt; <span class="s2">&quot;&lt;matched message&gt;&quot;</span> <span class="o">{</span>

snmptrap <span class="nv">OID</span><span class="o">=</span><span class="s2">&quot;.1.3.6.1.4.1.3375.2.4.0.XXX&quot;</span>

<span class="o">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Replace &lt;alert_name&gt; with a descriptive name. Do not use an alert name that
exactly matches one already used in the /etc/alertd/alert.conf file or the
/config/user_alert.conf file. Replace &lt;matched_message&gt; with text that matches the
syslog messagethat triggers the custom trap. You can specify a portion of the syslog
message text or use a regular expression. F5 recommends that you do not include the
syslog prefix information, such as the date stamp and process ID, in the match string.
Including information of a variable nature in the match string or regular expression
may result in unexpected false positives or result in no matches at all. The syslog
message you want to trap must not match the matched_message value of any other SNMP
trap defined in the /etc/alertd/alert.conf file or the /config/user_alert.conf file.</p>
</div>
</li>
<li><p class="first">Replace XXX with a number unique to this object ID.</p>
<p>You can use any object ID that meets all of the following criteria:</p>
<ul class="simple">
<li>The object ID is in standard object identifier (OID) format, and
within the following range:</li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>.1.3.6.1.4.1.3375.2.4.0.300 through .1.3.6.1.4.1.3375.2.4.0.999
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If the OID value is outside the range listed above, a trap
will be sent with the OID specified, but it will not contain any
text within the trap body.</p>
</div>
<ul class="simple">
<li>The object ID is in a numeric range that can be processed by your
trap receiving tool.</li>
<li>The object ID does not already exist in the
/usr/share/snmp/mibs/F5-BIGIP-COMMON-MIB.txt management information
base (MIB) file.</li>
<li>The object ID is not already used in another custom trap.</li>
</ul>
</li>
<li><p class="first">Save the file and exit the editor.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If the alertd process fails to start, examine the newly added
entry to ensure it contains all of the required elements and
punctuation.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Note: To test the newly created trap, refer to K11127: Testing SNMP
traps on the BIG-IP system (9.4.x - 13.x).</p>
</div>
</li>
</ol>
<p><strong>Custom SNMP trap example</strong></p>
<p>A message that appears similar to the following example is logged to the
/var/log/ltm file when switchboard failsafe is enabled:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Sep <span class="m">23</span> <span class="m">11</span>:51:40 bigip1.askf5.com lacpd<span class="o">[</span><span class="m">27753</span><span class="o">]</span>: <span class="m">01160016</span>:6: Switchboard
Failsafe enabled
</pre></div>
</div>
<p>To create a custom SNMP trap that is triggered whenever switchboard
failsafe status changes are logged, add the following trap definition to
the /config/user_alert.conf file:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>alert SWITCHBOARD_FAILSAFE_STATUS <span class="s2">&quot;Switchboard Failsafe (.*)&quot;</span> <span class="o">{</span>

snmptrap <span class="nv">OID</span><span class="o">=</span><span class="s2">&quot;.1.3.6.1.4.1.3375.2.4.0.500&quot;</span>

<span class="o">}</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
<p><strong>1.06 - Explain how to log different levels of local traffic message logs</strong></p>
<p><a class="reference external" href="https://support.f5.com/csp/article/K5532">https://support.f5.com/csp/article/K5532</a></p>
<p><strong>Log levels related to Traffic Management events</strong></p>
<p>Traffic Management events use levels to distinguish the severity of the
event. Traffic Management uses these severity levels when designating
log levels. Log levels set the threshold at which Traffic Management
event messages start accruing in the log files. Traffic Management event
messages equal to and greater than the specified log level are written
to the log file. For example, if you specify a log level of Warning, the
system writes events classified as Warning, Error, Critical, Alert, and
Emergency to the log file.</p>
<p>For information about how to specify which events are logged, refer to
the Configuring log levels for Traffic Management Events section of this
article.</p>
<p>Important: Use caution when changing a log level from its default
setting. Refer to the event mapping files in the /etc/alertd/ directory
to determine which Traffic Management event messages are associated with
each log level. Repeat this procedure after each upgrade, as some
Traffic Management event messages and their associated log levels may
differ between software releases.</p>
<p><strong>Configuring log levels for Traffic Management Events</strong></p>
<p>You can configure log levels for Traffic Management events from the
Configuration utility or the command line. To do so, perform one of the
following procedures:</p>
<p>Impact of procedure: An overloaded BIG-IP system may experience
performance degradation if the logging intensity is high.</p>
<p>Using the Configuration utility to configure log levels for Traffic
Management events</p>
<ol class="arabic simple">
<li>Log in to the Configuration utility.</li>
<li>Navigate to System &gt; Logs &gt; Configuration &gt; Options.</li>
<li>Select the desired log levels from the menu of the Local Traffic
Logging event or Audit Logging event.</li>
<li>Click Update.</li>
</ol>
<p>Using tmsh to configure log levels for Traffic Management events</p>
<ol class="arabic">
<li><p class="first">Log in to tmsh by typing the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>tmsh
</pre></div>
</div>
</li>
<li><p class="first">To modify the log level of the desired event, use the following
command syntax:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>modify /sys db &lt;name&gt; &lt;string&gt;

For example, to <span class="nb">set</span> the log level <span class="k">for</span> MCP events to debug, you would
<span class="nb">type</span> the following command:

modify /sys db log.mcpd.level value debug

To <span class="nb">enable</span> audit logging <span class="k">for</span> user-initiated configuration changes and
configuration loads, you would <span class="nb">type</span> the following command:

modify /sys db config.auditing value verbose
</pre></div>
</div>
</li>
<li><p class="first">Save the change by typing the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>save sys config
</pre></div>
</div>
</li>
</ol>
<hr class="docutils" />
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>1.06 - Explain how to trigger custom alerts for testing purposes</strong></p>
<p><a class="reference external" href="https://support.f5.com/csp/article/K11127">https://support.f5.com/csp/article/K11127</a></p>
<p><strong>Using the logger utility to test SNMP traps</strong></p>
<p>To test SNMP traps using the logger utility, perform the following
procedure:</p>
<p>Impact of procedure: Performing the following procedure should not have
a negative impact on your system.</p>
<ol class="arabic">
<li><p class="first">While remaining logged in to the BIG-IP command line, construct your
logger command with the information you extracted using the following
syntax:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>logger -p &lt;facility&gt;.&lt;level&gt; <span class="s2">&quot;&lt;alert code&gt;:&lt;log level&gt;: &lt;descriptive message&gt;&quot;</span>
</pre></div>
</div>
<p>In the previous syntax, note the following:</p>
<ul>
<li><p class="first">&lt;facility&gt; is the syslog-ng facility as listed in the
/var/run/bigip_error_maps.dat file.</p>
</li>
<li><p class="first">&lt;level&gt; is the facility log level, which can include one of any eight
available log levels.</p>
</li>
<li><p class="first">&lt;alert code&gt; is the alert code as indicated in the *_maps.h file
entry.</p>
</li>
<li><p class="first">&lt;log level&gt; is the alert log level. This level corresponds with the
following values:</p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="41%" />
<col width="39%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Log level</strong></th>
<th class="head"><strong>Description</strong></th>
<th class="head"><strong>Corresponding syslog level</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>0</td>
<td>System is unusable</td>
<td>emerg</td>
</tr>
<tr class="row-odd"><td>1</td>
<td>Action must be taken immediately</td>
<td>alert</td>
</tr>
<tr class="row-even"><td>2</td>
<td>Critical conditions</td>
<td>crit</td>
</tr>
<tr class="row-odd"><td>3</td>
<td>Error conditions</td>
<td>err</td>
</tr>
<tr class="row-even"><td>4</td>
<td>Warning conditions</td>
<td>warning</td>
</tr>
<tr class="row-odd"><td>5</td>
<td>Normal but significant condition</td>
<td>notice</td>
</tr>
<tr class="row-even"><td>6</td>
<td>Informational</td>
<td>info</td>
</tr>
<tr class="row-odd"><td>7</td>
<td>Debug-level messages</td>
<td>debug</td>
</tr>
</tbody>
</table>
</li>
<li><p class="first">&lt;descriptive message&gt; is the descriptive message string format used
to describe the alert. Note that %s in the example will match any
string.</p>
</li>
</ul>
<p>For example, using the information extracted in step 6 of the
previous procedure, you could create the following logger command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>logger -p local0.notice <span class="s2">&quot;01070640:5: Node 10.10.64.14 monitor status down.&quot;</span>
</pre></div>
</div>
<p>This command will output a syslog-ng message to the local0.notice
facility (the default destination of which is the /var/log/ltm file)
and generate an SNMP trap for this message.</p>
</li>
</ol>
<div class="line-block">
<div class="line"><br /></div>
</div>
<iframe width="560" height="315" src="https://www.youtube.com/embed/3uDzuRZ47FA?rel=0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe><div class="line-block">
<div class="line"><br /></div>
</div>
<hr class="docutils" />
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="objective-1-07-describe-how-to-set-up-custom-alerting-for-an-ltm-device">
<h2>Objective - 1.07 - Describe how to set up custom alerting for an LTM device<a class="headerlink" href="#objective-1-07-describe-how-to-set-up-custom-alerting-for-an-ltm-device" title="Permalink to this headline">¶</a></h2>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
<p><strong>1.07 - List and describe custom alerts: SNMP, email and Remote Syslog</strong></p>
<p><a class="reference external" href="https://support.f5.com/csp/article/K3667">https://support.f5.com/csp/article/K3667</a></p>
<p><strong>Custom Alerts</strong></p>
<p>SNMP traps provide a means of notification through external network
management systems when certain events occur on the BIG-IP system. In
addition to the external network management systems notification system,
you can also configure the BIG-IP system to send email messages
directly.</p>
<p>The /etc/alertd/alert.conf and the /config/user_alert.conf files on the
BIG-IP system define monitored events and the corresponding actions (for
example, sending an SNMP trap or an email notification) when certain
events occur. The /etc/alertd/alert.conf file defines standard system
alerts, and the /config/user_alert.conf file defines custom settings.
You should edit only the /config/user_alert.conf file. When the alertd
process starts, the BIG-IP system creates a dynamic configuration file
by appending the /config/user_alert.conf file to the /etc/alertd/alert.conf file.</p>
<p>Configuring SNMP trap alerts to send an email notification</p>
<p>Impact of procedure: Performing the following procedure should not have
a negative impact on your system.</p>
<ol class="arabic">
<li><p class="first">Log in to the command line.</p>
</li>
<li><p class="first">To back up the /config/user_alert.conf file, type the following
command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cp /config/user_alert.conf /config/user_alert.conf.SOL3667
</pre></div>
</div>
</li>
<li><p class="first">To modify the permissions on the user_alert.conf file to include
write access, type the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>chmod <span class="m">644</span> /config/user_alert.conf
</pre></div>
</div>
</li>
<li><p class="first">Using a text editor, edit the /config/user_alert.conf file to create
a custom alert definition according to the following format:</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For more information about configuring custom alerts, refer to
K3727: Configuring custom SNMP traps.</p>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>alert &lt;ALERT_NAME&gt; <span class="o">{</span>

snmptrap <span class="nv">OID</span><span class="o">=</span><span class="s2">&quot;&lt;OID&gt;&quot;</span>

<span class="o">}</span>
</pre></div>
</div>
<p>The alert definitions may appear similar to the following example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>alert BIGIP_SHELL_BP_CONFIGURATION_LOADED <span class="o">{</span>

snmptrap <span class="nv">OID</span><span class="o">=</span><span class="s2">&quot;.1.3.6.1.4.1.3375.2.4.0.28&quot;</span>

<span class="o">}</span>
</pre></div>
</div>
<p>For each alert definition for which you want to receive email
notification, add a semicolon (;) to the end of the existing
snmptrap line, and then add the following lines between the snmptrap
line and the terminating curly brace:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>email <span class="nv">toaddress</span><span class="o">=</span><span class="s2">&quot;&quot;</span>

<span class="nv">fromaddress</span><span class="o">=</span><span class="s2">&quot;&quot;</span>

<span class="nv">body</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
</pre></div>
</div>
<p>For example, the following alert definition sends an email
notification using the configured email toaddress, fromaddress, and
body options:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>alert BIGIP_SHELL_BP_CONFIGURATION_LOADED <span class="o">{</span>

snmptrap <span class="nv">OID</span><span class="o">=</span><span class="s2">&quot;.1.3.6.1.4.1.3375.2.4.0.28&quot;</span><span class="p">;</span>

email <span class="nv">toaddress</span><span class="o">=</span><span class="s2">&quot;demo@askf5.com&quot;</span>

<span class="nv">fromaddress</span><span class="o">=</span><span class="s2">&quot;root&quot;</span>

<span class="nv">body</span><span class="o">=</span><span class="s2">&quot;The test of this Solution worked!&quot;</span>

<span class="o">}</span>
</pre></div>
</div>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">To configure the “fromaddress” to use a custom address,
refer to K27540405: The tmsh command now supports the RewriteDomain
and FromLineOverride SSMTP configuration and K13180: Configuring the
BIG-IP system to deliver locally generated email messages (11.x -
13.x).</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>You can send the email notifications to multiple recipients by
separating the email addresses specified in the email toaddress
option with a comma (,), as shown in the following example:</p>
<div class="last highlight-bash notranslate"><div class="highlight"><pre><span></span>email <span class="nv">toaddress</span><span class="o">=</span><span class="s2">&quot;demo@askf5.com,demo2@askf5.com&quot;</span>
</pre></div>
</div>
</div>
</li>
<li><p class="first">Save and exit the file.</p>
</li>
<li><p class="first">To restore the permissions on the user_alert.conf file, type the
following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>chmod <span class="m">444</span> /config/user_alert.conf
</pre></div>
</div>
</li>
<li><p class="first">To restart the alertd process, type the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>tmsh restart /sys service alertd
</pre></div>
</div>
<p>When the alert is triggered, the BIG-IP system will send an email
notification that appears similar to the following example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>-----Original Message-----

From: root@bigip1.askf5.com

Sent: Monday, December <span class="m">25</span>, <span class="m">2007</span> <span class="m">12</span>:10 PM

To: demo@askf5.com

Subject: 010a0043:5: The configuration was successfully loaded.

The <span class="nb">test</span> of this Solution worked!

---END---
</pre></div>
</div>
</li>
</ol>
<hr class="docutils" />
<p><a class="reference external" href="https://support.f5.com/csp/article/K13080">https://support.f5.com/csp/article/K13080</a></p>
<p><strong>Configuring a remote syslog server</strong></p>
<p>The Configuration utility provides a basic means of configuring the
syslog configurations, such as defining the log levels. To configure
extensive syslog-ng customizations, you must use the command line.
Examples of syslog-ng customizations include, but are not limited to,
the following:</p>
<ul class="simple">
<li>Single remote syslog server</li>
<li>Multiple remote syslog servers</li>
<li>Remote syslog server port</li>
<li>Local IP address for BIG-IP syslog to bind to when sending logs to
remote syslog server</li>
<li>Log to remote syslog server using the TCP protocol</li>
</ul>
<p>Adding a remote syslog server using the Configuration utility</p>
<p>Impact of procedure: Performing the following procedure should not have
a negative impact on your system.</p>
<p>Note: Adding remote syslog servers using the Configuration utility is
available in BIG-IP 11.1.0 and later.</p>
<ol class="arabic">
<li><p class="first">Log on to the Configuration utility.</p>
</li>
<li><p class="first">Navigate to System &gt; Logs &gt; Configuration &gt; Remote Logging.</p>
</li>
<li><p class="first">Enter the destination syslog server IP address in the Remote IP text
box.</p>
</li>
<li><p class="first">Enter the remote syslog server UDP port (default is 514) in the
Remote Port text box.</p>
</li>
<li><p class="first">Enter the local IP address of the BIG-IP system in the Local IP text
box (optional).</p>
<p>Note: For BIG-IP systems in a high availability (HA) configuration,
the non-floating self IP address is recommended if using a Traffic
Management Microkernel (TMM) based IP address.</p>
</li>
<li><p class="first">Click Add.</p>
</li>
<li><p class="first">Click Update.</p>
</li>
<li><p class="first">For BIG-IP systems in a high availability (HA) configuration, repeat
all previous steps for each device in the device group.</p>
</li>
</ol>
<p>Adding a single remote syslog server</p>
<p>Impact of procedure: Performing the following procedure should not have
a negative impact on your system.</p>
<ol class="arabic">
<li><p class="first">Log in to the TMOS Shell (tmsh) by typing the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>tmsh
</pre></div>
</div>
</li>
<li><p class="first">To add a single remote syslog server, use the following command
syntax:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>modify /sys syslog remote-servers add <span class="o">{</span> &lt;name&gt; <span class="o">{</span> host &lt;IP address&gt; remote-port &lt;port&gt; <span class="o">}}</span>
</pre></div>
</div>
<p>For example, to add remote syslog server 172.28.31.40 with port 514
and name mysyslog, type the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>modify /sys syslog remote-servers add <span class="o">{</span> mysyslog <span class="o">{</span> host <span class="m">172</span>.28.31.40 remote-port <span class="m">514</span> <span class="o">}}</span>
</pre></div>
</div>
</li>
<li><p class="first">To save the configuration, type the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>save /sys config
</pre></div>
</div>
</li>
<li><p class="first">For BIG-IP systems in a HA configuration, repeat all previous steps
for each device in the device group.</p>
</li>
</ol>
<hr class="docutils" />
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>1.07 - Identify the location of custom alert configuration files</strong></p>
<p><a class="reference external" href="https://support.f5.com/kb/en-us/solutions/public/3000/700/sol3727.html?sr=46108087">https://support.f5.com/kb/en-us/solutions/public/3000/700/sol3727.html?sr=46108087</a></p>
<p><strong>SNMP trap configuration files</strong></p>
<p>Important: Modifications to the /config/user_alert.conf file may
not be preserved after system upgrades or hotfix installations. For
example, this file is not preserved when upgrading from BIG-IP 10.x
to 11.0.0. F5 Technical Support recommends that you create an
updated user configuration set (UCS) archive immediately preceding
an upgrade operation if you want to maintain the customizations in
the file.</p>
<p>Important: Beginning in BIG-IP 11.0.0, the configuration
synchronization (ConfigSync) process between BIG-IP devices does not
include the /config/user_alert.conf configuration file. If you
require the peer device to send custom SNMP traps, you must perform
the following procedures on each peer device.</p>
<p>Standard, pre-configured SNMP traps are contained in the
/etc/alertd/alert.conf file. F5 does not recommend, or support, the
addition or removal of traps or any other changes to the alert.conf
file.</p>
<p>Custom, user-defined SNMP traps should be defined in the
/config/user_alert.conf file.</p>
<p>The BIG-IP system will process the alert notification specified in the
/config/user_alert.conf file first, if the same alert definition exists
on both of the config files.</p>
<p>Prior to BIG-IP 10.1.0, when the alertd process starts, it creates a
dynamic configuration file by appending the /config/user_alert.conf
file to the /etc/alertd/alert.conf file. The BIG-IP system searches the
dynamic configuration file sequentially for matches. After a match is
found, the trap is generated and no further matches are attempted.</p>
<p>Note: All files in the /config directory, including any
customizations to the /config/user_alert.conf file, are
automatically included in the UCS archive by default. For more
information, refer to K4422: Viewing and modifying the files that
are configured for inclusion in a UCS archive.</p>
<hr class="docutils" />
<p><a class="reference external" href="https://support.f5.com/kb/en-us/solutions/public/13000/100/sol13180.html?sr=46626450">https://support.f5.com/kb/en-us/solutions/public/13000/100/sol13180.html?sr=46626450</a></p>
<p><strong>SMTP configuration</strong></p>
<p>In BIG-IP 11.0.0 and later, you can use ssmtp to configure the system to
send locally generated email messages to a configured Simple Mail
Transfer Protocol (SMTP) mail hub. The ssmtp program accepts a mail
stream on standard input with email recipients specified on the command
line.</p>
<p>Note: In versions prior to BIG-IP 11.0.0, you can use the Postfix
software to deliver locally generated email messages. Starting in BIG-IP
11.0.0, F5 removed Postfix from BIG-IP software. For more information,
refer to K13182: Postfix has been removed from BIG-IP software.</p>
<p><strong>Procedures</strong></p>
<p>You can configure the BIG-IP system to deliver locally-generated email
messages using ssmtp by performing one of the following procedures,
depending on the BIG-IP version.</p>
<p><strong>Configuring ssmtp to send locally generated email messages using the
tmsh utility (11.5.0 and later)</strong></p>
<p>Beginning in 11.5.0, you can use the Traffic Management Shell (tmsh) to
configure an SMTP mail hub. BIG-IP 11.5.0 through 12.1.2 do not support
advanced SMTP options using the tmsh utility.</p>
<p>Note: Due to a known issue, the BIG-IP system does not automatically
configure a domain name in the email From: line. For more information
about and how to work around the issue, refer to K15188934: Emails
generated by the BIG-IP system may fail after upgrading to version
13.0.0.</p>
<p>Impact of procedure: Performing the following procedure should not have
a negative impact on your system.</p>
<ol class="arabic">
<li><p class="first">Log in to the Traffic Management Shell (tmsh) by typing the following
command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>tmsh
</pre></div>
</div>
</li>
<li><p class="first">To configure the system to send locally generated email messages, use
the following command syntax:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>  modify /sys outbound-smtp mailhub &lt;mail_server&gt;:&lt;port&gt;

For example, to configure the system to send locally generated email
messages to host mail.mydomain.com using port <span class="m">587</span>, you <span class="nb">type</span> the
following command:

modify /sys outbound-smtp mailhub mail.mydomain.com:587
</pre></div>
</div>
</li>
<li><p class="first">To save the configuration, type the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>save /sys config
</pre></div>
</div>
</li>
</ol>
<hr class="docutils" />
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>1.07 - Identify the available levels for local traffic logging</strong></p>
<p><a class="reference external" href="https://support.f5.com/kb/en-us/products/big-ip_ltm/manuals/product/tmos-concepts-11-5-0/11.html">https://support.f5.com/kb/en-us/products/big-ip_ltm/manuals/product/tmos-concepts-11-5-0/11.html</a></p>
<p><strong>Log level settings for BIG-IP system events</strong></p>
<p>For each type of system-level process, such as bigdb configuration
events or events related to HTTP compression, you can set a minimum log
level. The minimum log level indicates the minimum severity level at
which the BIG-IP system logs that type of event. There are many
different types of local traffic or global traffic events for which you
can set a minimum log level.</p>
<p>The log levels that you can set on certain types of events, ordered from
highest severity to lowest severity, are:</p>
<ul class="simple">
<li>Emergency</li>
<li>Alert</li>
<li>Critical</li>
<li>Error</li>
<li>Warning</li>
<li>Notice</li>
<li>Informational</li>
<li>Debug</li>
</ul>
<p>For example, if you set the minimum log level for bigdb events to Error,
then the system only logs messages that have a severity of Error or
higher for those events.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<iframe width="560" height="315" src="https://www.youtube.com/embed/3uDzuRZ47FA?rel=0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe><div class="line-block">
<div class="line"><br /></div>
</div>
<hr class="docutils" />
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>


     </div>
    
     <div class="row next-prev-btn-row">
       <div class="col-lg-12">
       
        <a href="../class7.html" title="F5 301B - BIG-IP LTM Specialist: Maintain and Troubleshoot Study Guide 11/01/19" accesskey="p" class="btn btn-primary left"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i> Previous</a>
       
       
          <a href="module2.html" title="Section 2 - Identify and Resolve Application Issues" accesskey="n" class="btn btn-primary right">Next <i class="fa fa-arrow-circle-right" aria-hidden="true"></i></a>
       
     </div>
     </div>
    

    </article>
  </div>

</div>


  <div id="clouddocs-footer"></div>
  <!-- Bootstrap core JavaScript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->

  <script src="../../_static/js/index.js"></script>
  <script src="../../_static/js/jquery.appear.js"></script>
  <script src="../../_static/js/printThis.js"></script>
  <script src="../../_static/js/bootstrap.min.js"></script>
  <script src="../../_static/js/clouddocs.js"></script>
  <script src="../../_static/js/CoveoJsSearch.Lazy.min.js"></script>
  </body>
</html>