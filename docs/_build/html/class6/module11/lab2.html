<!DOCTYPE html>
<head>
  
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-PPZPQ6');</script>
  <!-- End Google Tag Manager -->
    <title>BIG-IP Remote Logging</title>
  

  <meta charset="utf-8">
  <!-- Twitter Bootstrap viewport setting -->
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <!-- F5 metadata -->
  <meta name="title" content="BIG-IP Remote Logging"/>
  <meta name="product" content="Unofficial - F5 Certification Exam Prep Material"/>
  <meta name="version" content=""/>
  <meta name="updated_date"  content="2020-08-13 09:31:44"/>
  <meta name="archived" content="Archived documents excluded"/>
  <meta name="doc_type" content="Manual"/>
  <meta name="lifecycle" content="release"/>
  <meta name="Unofficial - F5 Certification Exam Prep Material" content=""/>


  

  
  <link href="https://cdn.f5.com/favicon.ico" rel="icon">

</head>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>BIG-IP Remote Logging &#8212; Unofficial - F5 Certification Exam Prep Material  documentation</title>
    <link rel="stylesheet" href="../../_static/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/f5_agility_theme.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/f5.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/f5-theme.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/CoveoFullSearch.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css" />
    <link rel="stylesheet" type="text/css" href="https://use.fontawesome.com/21fb8a09c3.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Appendix I - ANSWER KEY" href="../module12/module12.html" />
    <link rel="prev" title="More Security Features" href="lab1.html" /> 
  </head><body>
  <div id="clouddocs-header"></div>

    <div id="sidebar" class="section-nav">
      
      <!--  version selector ------------------>
      <div id="version_selector_wrapper">
      </div>
      <nav class="nav-sidebartoc">

        
         <h5>Unofficial - F5 Certification Exam Prep Material  </h5>
        

        <hr>
        <span class="nav-sidebartoc">
            <p class="caption"><span class="caption-text">Intro:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../intro.html">Getting Started with the F5 Certification Program 03/29/19</a></li>
</ul>
<p class="caption"><span class="caption-text">Unofficial - 101 Certification Exam Resources:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../class1/class1.html">F5 101 - App Delivery Fundamentals Study Guide 11/01/19</a></li>
</ul>
<p class="caption"><span class="caption-text">Unofficial - 201 Certification Exam Resources:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../class2/class2.html">F5 201 - TMOS Administration Study Guide 11/01/19</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../class3/class3.html">F5 201 - TMOS Administration Labs 08/11/2020</a></li>
</ul>
<p class="caption"><span class="caption-text">Unofficial - 202 Certification Exam Resources:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../class4/class4.html">F5 202 - Pre-Sales Fundamentals Study Guide 11/01/19</a></li>
</ul>
<p class="caption"><span class="caption-text">Unofficial - 301A Certification Exam Resources:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../class5/class5.html">F5 301A - BIG-IP LTM Specialist: Architect, Set-Up &amp; Deploy Study Guide 11/01/19</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../class6.html">F5 301A - BIG-IP LTM Specialist Labs 11/01/19</a></li>
</ul>
<p class="caption"><span class="caption-text">Unofficial - 301B Certification Exam Resources:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../class7/class7.html">F5 301B - BIG-IP LTM Specialist: Maintain and Troubleshoot Study Guide 11/01/19</a></li>
</ul>
<p class="caption"><span class="caption-text">Unofficial - 302 Certification Exam Resources:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../class9/class9.html">F5 302 - BIG-IP DNS Specialist Study Guide 11/01/19</a></li>
</ul>
<p class="caption"><span class="caption-text">Unofficial - 303 Certification Exam Resources:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../class11/class11.html">F5 303 - BIG-IP ASM Specialist Study Guide 11/01/19</a></li>
</ul>
<p class="caption"><span class="caption-text">Unofficial - 304 Certification Exam Resources:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../class13/class13.html">F5 304 - BIG-IP APM Specialist Study Guide 11/01/19</a></li>
</ul>
<p class="caption"><span class="caption-text">Unofficial - 401 Certification Exam Resources:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../class15/class15.html">F5 401 - Security Solution Expert Study Guide 11/01/19</a></li>
</ul>
<p class="caption"><span class="caption-text">Unofficial - 402 Certification Exam Resources:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../class17/class17.html">F5 402 - Cloud Solutions Study Guide 11/01/19</a></li>
</ul>

        </span><!-- Use this file to add extra links to the bottom of the ToC sidebar -->
<hr>
  <span class="nav-sidebartoc">
 <!-- insert content here -->
  </span>
      </nav>
    </div>


    <div id="right-sidebar">
      <h7 style="font-weight:normal">On this page:</h7>
      <nav class="nav-sidebartoc">
        <span class="nav-sidebartoc">
            <ul>
<li><a class="reference internal" href="#">BIG-IP Remote Logging</a><ul>
<li><a class="reference internal" href="#configuring-a-logging-pool">Configuring a logging pool</a></li>
<li><a class="reference internal" href="#configure-the-logging-destinations">Configure the logging destinations</a><ul>
<li><a class="reference internal" href="#high-speed-logging-hsl-log-destination">High Speed Logging (HSL) Log Destination</a></li>
<li><a class="reference internal" href="#formatted-log-destination">Formatted Log Destination</a></li>
</ul>
</li>
<li><a class="reference internal" href="#log-publisher-and-filtering-messages">Log Publisher and Filtering Messages</a><ul>
<li><a class="reference internal" href="#system-logging-filter">System Logging Filter</a></li>
</ul>
</li>
<li><a class="reference internal" href="#test-your-logging-configuration">Test your logging configuration</a></li>
</ul>
</li>
</ul>

         </span>
      </nav>
    </div>





  
  <div class="main active" id="content" >
    <article class="docs-container site-article-inner">
              <!-- custom breadcrumb -->
        <h5>
            <a href="../../index.html">Unofficial - F5 Certification Exam Prep Material</a>
              &gt; <a href="../class6.html">F5 301A - BIG-IP LTM Specialist Labs 11/01/19</a>
              &gt; <a href="module11.html">Lab 11 - Security and Securing the BIG-IP</a>

          <span class="right">
             <a href="../../_sources/class6/module11/lab2.rst.txt" rel="nofollow">Source</a> |
             <a href="https://github.com/leifbr/f5-agility-labs-cert">Edit on <i class="fa fa-github" aria-hidden="true"></i></a>
          </span>
        </h5>
        <!-- end custom breadcrumb -->
      


    <!--a title="Export PDF" id="export-pdf" class="btn btn btn-link pull-right">View PDF</a-->
    <button type="button" id="export-pdf" class="btn btn-link right">PDF</button>


    
     
         <div class="sidebar" id="version-warning" style="display: none;">
           <p class="first sidebar-title">
           <span class="icon fa fa-info-circle fa-lg"></span> Version notice:</p>
           <p class="last" id="currentVersion"></p>
          </div>


     <div role="main">
        
  <div class="section" id="big-ip-remote-logging">
<h1>BIG-IP Remote Logging<a class="headerlink" href="#big-ip-remote-logging" title="Permalink to this headline">¶</a></h1>
<p>Your customer would like to integrate BIG-IP system messages with
their central logging system, to be processed by their correlation
software. They would like you to send mcpd informational messages (to external logging server(s)).</p>
<div class="section" id="configuring-a-logging-pool">
<h2>Configuring a logging pool<a class="headerlink" href="#configuring-a-logging-pool" title="Permalink to this headline">¶</a></h2>
<p>Create a pool with the logging server(s). This will be the destination for
high speed logging. You will be logging to <strong>syslog_ng</strong> over TCP port <strong>514</strong>.
You will be using a combination of an inband monitor and an active
monitor to determine the log server’s availability. This monitor will
combination will reduce network activity and superfluous log messages to
the syslog server.</p>
<p>Configure the <strong>Logging Pool</strong>.</p>
<p>Because the syslog server is using the TCP protocol, we can use inband monitors.  Create an <strong>inband</strong> monitor named <strong>syslog_inband</strong> and use the default configuration.</p>
<p>Create an active <strong>TCP</strong> monitor named <strong>syslog_active</strong> and set the
<strong>Up Interval</strong> to <strong>180</strong> seconds.</p>
<p>This monitor will poll the syslog server every three minutes while the inband
monitor is showing the server available. If the server goes down, it
will be polled every 5 seconds.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The purpose of the monitors is to reduce logging to the syslog server, which will
log the monitor request as they come in.  The inband monitor will use message traffic the monitor the syslog server without generating message traffic, but if the syslog server goes down the active monitor will return it to service much faster than the default inband timeout.</p>
</div>
<p>Create a logging pool named <strong>logging_pool</strong>, with the
<strong>syslog_inband</strong>, <strong>syslog_active</strong> monitors and the member
<strong>10.1.20.252:514</strong>.</p>
</div>
<div class="section" id="configure-the-logging-destinations">
<h2>Configure the logging destinations<a class="headerlink" href="#configure-the-logging-destinations" title="Permalink to this headline">¶</a></h2>
<p>Remember at least two log destinations need to be created. The first one
will be the High Speed Logging (HSL) Destination where the messages will
be sent (the Logging_Pool you just created) and the protocol that will be
used, TCP or UDP. The second Log Destination created will specify the
message format and the HSL Destination where formatted messages go too.</p>
<div class="section" id="high-speed-logging-hsl-log-destination">
<h3>High Speed Logging (HSL) Log Destination<a class="headerlink" href="#high-speed-logging-hsl-log-destination" title="Permalink to this headline">¶</a></h3>
<p>First you will create a Log Destination to tell the BIG-IP where to send
the log messages and the protocol to use.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The reason we have to define an HSL destination is because the is no way to assign a protocol to a pool.</p>
</div>
<p>Go to <strong>System &gt; Logs &gt; Configurations &gt; Log Destinations</strong> and create a
HSL destination named <strong>hsl_logging_dest</strong> of a type <strong>Remote
High-Speed Log</strong> and the pool name is <strong>logging_pool</strong></p>
</div>
<div class="section" id="formatted-log-destination">
<h3>Formatted Log Destination<a class="headerlink" href="#formatted-log-destination" title="Permalink to this headline">¶</a></h3>
<p>This log destination will be used to format the log output. You are
sending the messages to a syslogng server, so you will want them in a
syslog format. You will send the formatted log events to the HSL Log
Destination you created earlier.</p>
<p><strong>In Logging Destinations</strong> select <strong>Create</strong> and build a formatted
destination named <strong>formatted_dest</strong> with a type of <strong>Remote Syslog</strong>
and with the <strong>Syslog Format</strong> of <strong>Syslog</strong> and the <strong>High Speed Log
Destination</strong> set to <strong>hsl_logging_dest.</strong></p>
</div>
</div>
<div class="section" id="log-publisher-and-filtering-messages">
<h2>Log Publisher and Filtering Messages<a class="headerlink" href="#log-publisher-and-filtering-messages" title="Permalink to this headline">¶</a></h2>
<p>The log publisher is a way to associate individual or multiple log
destinations to a logging profile. In this case, any messages through
this publisher will go to local log files and the remote logs via
formatted_dest.</p>
<p>Go to <strong>System &gt; Logs &gt; Configurations &gt; Log Publishers</strong> and select
<strong>Create</strong>.</p>
<p>Name: <strong>logging_pub</strong></p>
<p>Destinations: Move <strong>formatted_dest</strong> and <strong>local-syslog</strong> to the
<strong>Selected</strong> box.</p>
<p>Select <strong>Finished</strong> when done.</p>
<p>This step created a log publisher that will send Syslog formatted events
to a remote server, the local database, and the local syslog. Normally
you wouldn’t want to go to all three, but this is one way to show how BIG-IP can
send to multiple destinations for demonstration purposes. And while you can log everything off the BIG-IP you will probably want some local logging available, so you can log on to the BIG-IP and check events without going through the syslog server.</p>
<div class="section" id="system-logging-filter">
<h3>System Logging Filter<a class="headerlink" href="#system-logging-filter" title="Permalink to this headline">¶</a></h3>
<p>Now you will create a system logging filter. This will demonstrate how
we can log systems events off box, as well as on box. We do NOT want to
take the defaults as logging down to the debug level would cause the
BIG-IP to drop log messages and could fill up the log files to the point
where the BIG-IP runs out of disk space. You are going to send
informational messages from the MCPd daemon to the published
destinations.</p>
<dl class="docutils">
<dt>Go to <strong>System &gt; Log &gt; Configuration &gt; Log Filters</strong> and select Create</dt>
<dd><ul class="first last simple">
<li>Name: <strong>my-mcpd-filter</strong></li>
<li>Severity: <strong>Informational</strong></li>
<li>Source: <strong>mcpd</strong></li>
<li>Log Publisher: <strong>logging_pub</strong></li>
</ul>
</dd>
</dl>
</div>
</div>
<div class="section" id="test-your-logging-configuration">
<h2>Test your logging configuration<a class="headerlink" href="#test-your-logging-configuration" title="Permalink to this headline">¶</a></h2>
<p>Generate and view a <strong>mcpd</strong> event.</p>
<p>SSH to the syslog-ng server at <strong>10.1.1.252</strong> (credentials are <strong>root/default</strong>)..</p>
<p>Watch the <strong>bigip.log</strong> syslog file for your events:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tail</span> <span class="o">-</span><span class="n">f</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">syslog</span> <span class="o">|</span> <span class="n">grep</span> <span class="n">bigip</span>
</pre></div>
</div>
<p>Go to <strong>Local Traffic &gt; Pools</strong> and select the <strong>www_pool</strong>. Disable
one of the pool members.</p>
<p><em>Q1. Did you see messages on the syslog servers?</em></p>
</div>
</div>


     </div>
    
     <div class="row next-prev-btn-row">
       <div class="col-lg-12">
       
        <a href="lab1.html" title="More Security Features" accesskey="p" class="btn btn-primary left"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i> Previous</a>
       
       
          <a href="../module12/module12.html" title="Appendix I - ANSWER KEY" accesskey="n" class="btn btn-primary right">Next <i class="fa fa-arrow-circle-right" aria-hidden="true"></i></a>
       
     </div>
     </div>
    

    </article>
  </div>

</div>


  <div id="clouddocs-footer"></div>
  <!-- Bootstrap core JavaScript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->

  <script src="../../_static/js/index.js"></script>
  <script src="../../_static/js/jquery.appear.js"></script>
  <script src="../../_static/js/printThis.js"></script>
  <script src="../../_static/js/bootstrap.min.js"></script>
  <script src="../../_static/js/clouddocs.js"></script>
  <script src="../../_static/js/CoveoJsSearch.Lazy.min.js"></script>
  </body>
</html>